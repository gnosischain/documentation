"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[82860],{34092:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>d,default:()=>o,frontMatter:()=>r,metadata:()=>a,toc:()=>l});var s=n(74848),t=n(28453);const r={title:"Omnibridge",description:"Omnibridge a native token bridge that mints the canonical representations of bridged assets on Gnosis",keywords:["omnibridge","token bridge","token claim"]},d="Omnibridge",a={id:"bridges/tokenbridge/omnibridge",title:"Omnibridge",description:"Omnibridge a native token bridge that mints the canonical representations of bridged assets on Gnosis",source:"@site/docs/bridges/tokenbridge/omnibridge.md",sourceDirName:"bridges/tokenbridge",slug:"/bridges/tokenbridge/omnibridge",permalink:"/bridges/tokenbridge/omnibridge",draft:!1,unlisted:!1,editUrl:"https://github.com/gnosischain/documentation/tree/main/docs/bridges/tokenbridge/omnibridge.md",tags:[],version:"current",lastUpdatedBy:"green",lastUpdatedAt:1705413437,formattedLastUpdatedAt:"Jan 16, 2024",frontMatter:{title:"Omnibridge",description:"Omnibridge a native token bridge that mints the canonical representations of bridged assets on Gnosis",keywords:["omnibridge","token bridge","token claim"]},sidebar:"bridges",previous:{title:"xDai Bridge",permalink:"/bridges/tokenbridge/xdai-bridge"},next:{title:"Tutorials",permalink:"/bridges/tutorials"}},c={},l=[{value:"Key Information",id:"key-information",level:2},{value:"Overview",id:"overview",level:3},{value:"Key Contracts",id:"key-contracts",level:3},{value:"Ethereum",id:"ethereum",level:3},{value:"Gnosis",id:"gnosis",level:3},{value:"Goerli",id:"goerli",level:3},{value:"Chiado",id:"chiado",level:3},{value:"Fees &amp; Daily Limits",id:"fees--daily-limits",level:3},{value:"Single Transaction Limits",id:"single-transaction-limits",level:4},{value:"Daily Limits",id:"daily-limits",level:4},{value:"Bridge Validators",id:"bridge-validators",level:3},{value:"Bridge Validator Flow",id:"bridge-validator-flow",level:3},{value:"Bridge Governance",id:"bridge-governance",level:3},{value:"Bridge Design",id:"bridge-design",level:2},{value:"Ethereum -&gt; Gnosis",id:"ethereum---gnosis",level:3},{value:"Gnosis -&gt; Ethereum.",id:"gnosis---ethereum",level:3},{value:"Mediator Contracts",id:"mediator-contracts",level:3},{value:"Exceptions and Special Cases",id:"exceptions-and-special-cases",level:2},{value:"Rebasing Tokens",id:"rebasing-tokens",level:3},{value:"Inflationary (Staking) Tokens",id:"inflationary-staking-tokens",level:3},{value:"Canonical Token Registries",id:"canonical-token-registries",level:3},{value:"Multiple Representations",id:"multiple-representations",level:3},{value:"Managing the Bridge",id:"managing-the-bridge",level:2},{value:"Interacting with Bridge Contracts",id:"interacting-with-bridge-contracts",level:3},{value:"Upgrading Bridge Contract",id:"upgrading-bridge-contract",level:3},{value:"Managing Bridge Validators",id:"managing-bridge-validators",level:3}];function h(e){const i={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{Details:r,TabItem:d,Tabs:a}=i;return r||x("Details",!0),d||x("TabItem",!0),a||x("Tabs",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"omnibridge",children:"Omnibridge"}),"\n",(0,s.jsx)(i.admonition,{type:"info",children:(0,s.jsxs)(i.p,{children:["Omnibridge can be accessed at ",(0,s.jsx)(i.a,{href:"https://omni.gnosischain.com/",children:"omni.gnosischain.com"})]})}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(80743).A+"",width:"1225",height:"711"})}),"\n",(0,s.jsx)(i.h2,{id:"key-information",children:"Key Information"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.a,{href:"https://omni.gnosischain.com/",children:"Omnibridge"})," is a native token bridge that mints the canonical representations of bridged assets on Gnosis. The Omnibridge is built on top of the ",(0,s.jsx)(i.a,{href:"/bridges/tokenbridge/amb-bridge",children:"Arbitrary Message Bridge (AMB)"})," and thus relies on the same group of ",(0,s.jsx)(i.a,{href:"/bridges/tokenbridge/amb-bridge#bridge-validators",children:"Trusted Bridge Validators"})," and trust model as the AMB. With ",(0,s.jsx)(i.a,{href:"/bridges/governance/decisions#add-telepathy-validator-in-the-amb",children:"Telepathy added as the 8th validator"}),", Omnibridge bridge is now more secure with trustless zero-knowledge light client technology. Check out how Omnibridge works with Telepathy validator ",(0,s.jsx)(i.a,{href:"/bridges/tokenbridge/amb-bridge#how-it-works-with-telepathy-validator",children:"here"}),"."]}),"\n",(0,s.jsx)(i.p,{children:"The Omnibridge currently connects Gnosis to Ethereum."}),"\n",(0,s.jsxs)(i.p,{children:["The Omnibridge mints bridged tokens using a variant of the ",(0,s.jsx)(i.a,{href:"https://github.com/ethereum/EIPs/issues/677",children:"ERC-677"})," token standard, with all bridged tokens tracked in the ",(0,s.jsx)(i.a,{href:"#canonical-token-registries",children:"canonical Bridged Token Registries"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{}),(0,s.jsx)(i.th,{children:"Detail"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Frontend URL"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://omni.gnosischain.com",children:"https://omni.gnosischain.com"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Trust Model"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"#bridge-validators",children:"4-of-8 Validator Multisig"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Governance"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"#bridge-governance",children:"8-of-16 Multisig"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Governance Parameters"}),(0,s.jsx)(i.td,{children:"Validator Set, Daily Limits, Fees"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Bug Bounty"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://immunefi.com/bounty/gnosischain/",children:"up to $2m"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Bug Reporting"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://immunefi.com/bounty/gnosischain/",children:"Immunefi"})})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"key-contracts",children:"Key Contracts"}),"\n",(0,s.jsxs)(a,{children:[(0,s.jsxs)(d,{value:"ethereum",label:"Ethereum",children:[(0,s.jsx)(i.h3,{id:"ethereum",children:"Ethereum"}),(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Contract"}),(0,s.jsx)(i.th,{children:"Ethereum Address"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"AMB Proxy Contract (Foreign)"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://etherscan.io/address/0x4C36d2919e407f0Cc2Ee3c993ccF8ac26d9CE64e#writeProxyContract",children:"0x4C36d2919e407f0Cc2Ee3c993ccF8ac26d9CE64e"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Omnibridge Multi-Token Mediator Proxy"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://etherscan.io/address/0x88ad09518695c6c3712AC10a214bE5109a655671#writeProxyContract",children:"0x88ad09518695c6c3712AC10a214bE5109a655671"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Validator Management Contract"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://etherscan.io/address/0xed84a648b3c51432ad0fD1C2cD2C45677E9d4064#writeProxyContract",children:"0xed84a648b3c51432ad0fD1C2cD2C45677E9d4064"})})]})]})]})]}),(0,s.jsxs)(d,{value:"gnosis",label:"Gnosis",children:[(0,s.jsx)(i.h3,{id:"gnosis",children:"Gnosis"}),(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Contract"}),(0,s.jsx)(i.th,{children:"Gnosis Address"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"AMB Proxy Contract"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://gnosisscan.io/address/0x75Df5AF045d91108662D8080fD1FEFAd6aA0bb59#writeProxyContract",children:"0x75Df5AF045d91108662D8080fD1FEFAd6aA0bb59"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Omnibridge Multi-Token Mediator Proxy"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://gnosisscan.io/address/0xf6A78083ca3e2a662D6dd1703c939c8aCE2e268d#writeProxyContract",children:"0xf6A78083ca3e2a662D6dd1703c939c8aCE2e268d"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Validator Management Contract"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://gnosisscan.io/address/0xA280feD8D7CaD9a76C8b50cA5c33c2534fFa5008#writeContract",children:"0xA280feD8D7CaD9a76C8b50cA5c33c2534fFa5008"})})]})]})]})]}),(0,s.jsxs)(d,{value:"goerli",label:"Goerli",children:[(0,s.jsx)(i.h3,{id:"goerli",children:"Goerli"}),(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Contract"}),(0,s.jsx)(i.th,{children:"Address"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"OmniBridge Mediator (Foreign)"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://goerli.etherscan.io/address/0x00147c84f13764dCDAbAF1cbAe622fa6f6839085",children:"0x00147c84f13764dCDAbAF1cbAe622fa6f6839085"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"AMB Contract Proxy (Foreign)"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://goerli.etherscan.io/address/0x87A19d769D875964E9Cd41dDBfc397B2543764E6",children:"0x87A19d769D875964E9Cd41dDBfc397B2543764E6"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GNO on Goerli"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://goerli.etherscan.io/address/0x7f477c3f03213970d939104cc436dc995cf615b5",children:"0x7f477c3f03213970d939104cc436dc995cf615b5"})})]})]})]})]}),(0,s.jsxs)(d,{value:"chiado",label:"Chiado",children:[(0,s.jsx)(i.h3,{id:"chiado",children:"Chiado"}),(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Contract"}),(0,s.jsx)(i.th,{children:"Address"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"OmniBridge Mediator (Home)"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://blockscout.chiadochain.net/address/0x09D549a48AC52F3f9945E7de6402c609c92aa2E1",children:"0x09D549a48AC52F3f9945E7de6402c609c92aa2E1"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"AMB Contract Proxy (Home)"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://blockscout.chiadochain.net/address/0x99Ca51a3534785ED619f46A79C7Ad65Fa8d85e7a",children:"0x99Ca51a3534785ED619f46A79C7Ad65Fa8d85e7a"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GnosisBridge(GNO) on Chiado"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://blockscout.chiadochain.net/address/0x19C653Da7c37c66208fbfbE8908A5051B57b4C70",children:"0x19C653Da7c37c66208fbfbE8908A5051B57b4C70"})})]})]})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"fees--daily-limits",children:"Fees & Daily Limits"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Token"}),(0,s.jsx)(i.th,{children:"Ethereum -> Gnosis"}),(0,s.jsx)(i.th,{children:"Gnosis -> Ethereum"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Approx. Gas Cost"}),(0,s.jsx)(i.td,{}),(0,s.jsx)(i.td,{})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Bridge Fees"}),(0,s.jsx)(i.td,{children:"0%"}),(0,s.jsx)(i.td,{children:"0.1%"})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"single-transaction-limits",children:"Single Transaction Limits"}),"\n",(0,s.jsx)(i.admonition,{type:"warning",children:(0,s.jsxs)(i.p,{children:["Bridging DAI token to Gnosis Chain DOES NOT mint native xDai token. If you want native xDai, use the ",(0,s.jsx)(i.a,{href:"xdai-bridge",children:"xDai Bridge"})]})}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Token"}),(0,s.jsx)(i.th,{children:"Ethereum -> Gnosis"}),(0,s.jsx)(i.th,{children:"Gnosis -> Ethereum"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Dai***"}),(0,s.jsx)(i.td,{children:"1,000,000,000"}),(0,s.jsx)(i.td,{children:"1,000,000,000 WXDAI"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"USDC"}),(0,s.jsx)(i.td,{children:"1,000,000,000"}),(0,s.jsx)(i.td,{children:"10,000,000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"USDT"}),(0,s.jsx)(i.td,{children:"1,000,000,000"}),(0,s.jsx)(i.td,{children:"5,000,000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"WETH"}),(0,s.jsx)(i.td,{children:"690"}),(0,s.jsx)(i.td,{children:"690"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"WBTC"}),(0,s.jsx)(i.td,{children:"12"}),(0,s.jsx)(i.td,{children:"12"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GNO"}),(0,s.jsx)(i.td,{children:"18350"}),(0,s.jsx)(i.td,{children:"18350"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GIV"}),(0,s.jsx)(i.td,{children:"60000000"}),(0,s.jsx)(i.td,{children:"60000000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"CLNY"}),(0,s.jsx)(i.td,{children:"14000000"}),(0,s.jsx)(i.td,{children:"14000000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"DXD"}),(0,s.jsx)(i.td,{children:"1000"}),(0,s.jsx)(i.td,{children:"1000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"HOPR"}),(0,s.jsx)(i.td,{children:"7000000"}),(0,s.jsx)(i.td,{children:"7000000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"HAUS"}),(0,s.jsx)(i.td,{children:"120000"}),(0,s.jsx)(i.td,{children:"120000"})]})]})]}),"\n",(0,s.jsx)(i.h4,{id:"daily-limits",children:"Daily Limits"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Token"}),(0,s.jsx)(i.th,{children:"Ethereum -> Gnosis"}),(0,s.jsx)(i.th,{children:"Gnosis -> Ethereum"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Dai***"}),(0,s.jsx)(i.td,{children:"1,000,000,000,000,000,000"}),(0,s.jsx)(i.td,{children:"1,000,000,000,000,000,000 xDai"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"USDC"}),(0,s.jsx)(i.td,{children:"1,000,000,000,000,000,000"}),(0,s.jsx)(i.td,{children:"10,000,000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"USDT"}),(0,s.jsx)(i.td,{children:"1,000,000,000,000,000,000"}),(0,s.jsx)(i.td,{children:"5,000,000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"WETH"}),(0,s.jsx)(i.td,{children:"690"}),(0,s.jsx)(i.td,{children:"690"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"WBTC"}),(0,s.jsx)(i.td,{children:"12.00000001"}),(0,s.jsx)(i.td,{children:"12.00000001"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GNO"}),(0,s.jsx)(i.td,{children:"18350"}),(0,s.jsx)(i.td,{children:"18350"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GIV"}),(0,s.jsx)(i.td,{children:"60000000"}),(0,s.jsx)(i.td,{children:"60000000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"CLNY"}),(0,s.jsx)(i.td,{children:"14000000"}),(0,s.jsx)(i.td,{children:"14000000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"DXD"}),(0,s.jsx)(i.td,{children:"1000"}),(0,s.jsx)(i.td,{children:"1000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"HOPR"}),(0,s.jsx)(i.td,{children:"7000000"}),(0,s.jsx)(i.td,{children:"7000000"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"HAUS"}),(0,s.jsx)(i.td,{children:"120000"}),(0,s.jsx)(i.td,{children:"120000"})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"*** Bridging Dai Using Omnibridge"}),"\n",(0,s.jsx)(i.admonition,{type:"note",children:(0,s.jsxs)(i.p,{children:["Daily Limit is reset according to the following logic: the smart contract stores total amount of processed tokens per current day and reverts on a new transfer if it exceeds the daily limit. Id of the day is calculated using the formula ",(0,s.jsx)(i.code,{children:"timestamp / (number of seconds in 1 day)"}),", where ",(0,s.jsx)(i.code,{children:"timestamp"})," is the Unix timestamp."]})}),"\n",(0,s.jsx)(i.h3,{id:"bridge-validators",children:"Bridge Validators"}),"\n",(0,s.jsxs)(i.p,{children:["For a message/tokens to be relayed to another network, bridge validators need to affirm the transaction. Bridge validators are run by trusted members of the Gnosis community. Since Omnibridge is based on the Arbitrary Message Bridge functionality, the set of validators is the actual set of AMB validators. The same ",(0,s.jsx)(i.a,{href:"amb-bridge#bridge-validators",children:"validator set"})," is used as the AMB bridge, as the OmniBridge is built on top of the AMB Bridge."]}),"\n",(0,s.jsx)(i.h3,{id:"bridge-validator-flow",children:"Bridge Validator Flow"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(44506).A+"",width:"1023",height:"1641"})}),"\n",(0,s.jsx)(i.h3,{id:"bridge-governance",children:"Bridge Governance"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:["See ",(0,s.jsx)(i.a,{href:"/bridges/governance",children:"Bridge Governance"})]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"bridge-design",children:"Bridge Design"}),"\n",(0,s.jsx)(i.h3,{id:"ethereum---gnosis",children:"Ethereum -> Gnosis"}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(80743).A+"",width:"1225",height:"711"})}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Token spend approval by user."}),"\n",(0,s.jsxs)(i.li,{children:["User call ",(0,s.jsx)(i.code,{children:"relayTokens()"})," on Mediator contract."]}),"\n",(0,s.jsxs)(i.li,{children:["Mediator calls ",(0,s.jsx)(i.code,{children:"requireToPassMessage()"})," on the Bridge."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"UserRequestForAffirmation"})," event is emitted for validators to validate the message."]}),"\n",(0,s.jsxs)(i.li,{children:["Message is relayed to the mediator contract when consensus is met by calling ",(0,s.jsx)(i.code,{children:"executeAffirmation()"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["ABM calls mediator on Gnosis chain:","\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"token does not exist: the mediator deploys a new token registry and mints the relayed amount."}),"\n",(0,s.jsx)(i.li,{children:"token exists: the relayed amount is minted in the token address."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.hr,{}),"\n",(0,s.jsx)(i.h3,{id:"gnosis---ethereum",children:"Gnosis -> Ethereum."}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{src:n(30060).A+"",width:"1225",height:"738"})}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["User calls ",(0,s.jsx)(i.code,{children:"transferAndCall"})," on ERC-677 token contract to send tokens to Omnibridge contract"]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"OnTokenTransfer"})," is called"]}),"\n",(0,s.jsxs)(i.li,{children:["Mediator contract burns tokens and calls bridge contract's ",(0,s.jsx)(i.code,{children:"requireToPassMessage()"})," function."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"UseRequestForSignature"})," event is emitted for validators to validate the message."]}),"\n",(0,s.jsxs)(i.li,{children:["Validators listen to the event: call ",(0,s.jsx)(i.code,{children:"submitSignature"})," on Gnosis chain."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"CollectedSignatures"})," event is emitted when consensus is met."]}),"\n",(0,s.jsxs)(i.li,{children:["User calls AMB (Ethereum side) ",(0,s.jsx)(i.code,{children:"executeSignatures()"})]}),"\n",(0,s.jsxs)(i.li,{children:["ABM calls ",(0,s.jsx)(i.code,{children:"handleBridgedTokens()"})," on Mediator."]}),"\n",(0,s.jsx)(i.li,{children:"Mediator contract unlocks the tokens"}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["The Omnibridge is built on top of the ",(0,s.jsx)(i.a,{href:"/bridges/tokenbridge/amb-bridge",children:"Arbitrary Message Bridge"}),"."]}),"\n",(0,s.jsx)(i.h3,{id:"mediator-contracts",children:"Mediator Contracts"}),"\n",(0,s.jsxs)(i.p,{children:["To handle the approval of token transfers, the Omnibridge makes use of what is called a mediator contract.\n",(0,s.jsx)(i.img,{src:n(82329).A+""})]}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["User calls token contract's ",(0,s.jsx)(i.code,{children:"approve()"})," function to approve the balance to be transferred."]}),"\n",(0,s.jsxs)(i.li,{children:[(0,s.jsx)(i.code,{children:"relayTokens()"})," is called on the Mediator contract"]}),"\n",(0,s.jsxs)(i.li,{children:["Mediator calls ",(0,s.jsx)(i.code,{children:"transferFrom()"})," on the token contract, transferring the approved balance"]}),"\n",(0,s.jsx)(i.li,{children:"If this is the first time that token is being bridged to the destination network, it will also query the token's name, symbol and decimals so a new contract can be deployed on the destination network"}),"\n",(0,s.jsxs)(i.li,{children:["Mediator contract then calls ",(0,s.jsx)(i.code,{children:"requireToPassMessage()"})," on the bridge contract"]}),"\n"]}),"\n",(0,s.jsx)(i.h2,{id:"exceptions-and-special-cases",children:"Exceptions and Special Cases"}),"\n",(0,s.jsx)(i.p,{children:"While most tokens can be freely transferred between chains, there are several exceptions where token properties create bridge-related issues."}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Bridge operations are disabled for Rebasing tokens."}),"\n",(0,s.jsx)(i.li,{children:"Inflationary tokens can still be bridged, but any accrued inflation IS NOT returned to the user upon bridge exit."}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"rebasing-tokens",children:"Rebasing Tokens"}),"\n",(0,s.jsx)(i.p,{children:"Rebasing tokens include an elastic function where supply can be increased or decreased at regular intervals. If these tokens are bridged, supply impacts could result in inequities on either side of the bridge. In some cases this could result in a bridge balance reduction and the inability for users to exit.\nTo prevent this, we have disabled bridging capability for rebasing type tokens. A partial token list is included below:"}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Click to View List"}),(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Name"}),(0,s.jsx)(i.th,{children:"Symbol"}),(0,s.jsx)(i.th,{children:"Address"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Base Protocol"}),(0,s.jsx)(i.td,{children:"BASE"}),(0,s.jsx)(i.td,{children:"0x07150e919b4de5fd6a63de1f9384828396f25fdc"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"USDf"}),(0,s.jsx)(i.td,{children:"USDf"}),(0,s.jsx)(i.td,{children:"0x05462671c05adc39a6521fa60d5e9443e9e9d2b9"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"xBTC"}),(0,s.jsx)(i.td,{children:"XBTC"}),(0,s.jsx)(i.td,{children:"0xecbf566944250dde88322581024e611419715f7a"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Debase"}),(0,s.jsx)(i.td,{children:"DEBASE"}),(0,s.jsx)(i.td,{children:"0x9248c485b0b80f76da451f167a8db30f33c70907"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Coil"}),(0,s.jsx)(i.td,{children:"COIL"}),(0,s.jsx)(i.td,{children:"0x3936ad01cf109a36489d93cabda11cf062fd3d48"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Dollars"}),(0,s.jsx)(i.td,{children:"USDX"}),(0,s.jsx)(i.td,{children:"0x2f6081e3552b1c86ce4479b80062a1dda8ef23e3"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"RMPL"}),(0,s.jsx)(i.td,{children:"RMPL"}),(0,s.jsx)(i.td,{children:"0xe17f017475a709de58e976081eb916081ff4c9d5"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Rebased"}),(0,s.jsx)(i.td,{children:"REB2"}),(0,s.jsx)(i.td,{children:"0x87f5f9ebe40786d49d35e1b5997b07ccaa8adbff"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"VELO Token"}),(0,s.jsx)(i.td,{children:"VLO"}),(0,s.jsx)(i.td,{children:"0x98ad9b32dd10f8d8486927d846d4df8baf39abe2"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Tokens of Babel"}),(0,s.jsx)(i.td,{children:"TOB"}),(0,s.jsx)(i.td,{children:"0x7777770f8a6632ff043c8833310e245eba9209e6"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Rise Protocol"}),(0,s.jsx)(i.td,{children:"RISE"}),(0,s.jsx)(i.td,{children:"0x3fa807b6f8d4c407e6e605368f4372d14658b38c"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Soft Link"}),(0,s.jsx)(i.td,{children:"SLINK"}),(0,s.jsx)(i.td,{children:"0x10bae51262490b4f4af41e12ed52a0e744c1137a"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Ramifi Protocol"}),(0,s.jsx)(i.td,{children:"RAM"}),(0,s.jsx)(i.td,{children:"0xac6fe9aa6b996d15f23e2e9a384fe64607bba7d5"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"GRPL Finance"}),(0,s.jsx)(i.td,{children:"GRPL"}),(0,s.jsx)(i.td,{children:"0x15e4132dcd932e8990e794d1300011a472819cbd"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Xdef Finance"}),(0,s.jsx)(i.td,{children:"XDEF2"}),(0,s.jsx)(i.td,{children:"0x5166d4ce79b9bf7df477da110c560ce3045aa889"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Antiample"}),(0,s.jsx)(i.td,{children:"XAMP"}),(0,s.jsx)(i.td,{children:"0xf911a7ec46a2c6fa49193212fe4a2a9b95851c27"})]})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"inflationary-staking-tokens",children:"Inflationary (Staking) Tokens"}),"\n",(0,s.jsx)(i.p,{children:"Inflationary tokens accrue additional value over time. While they are locked in the bridge contract this value will accrue, but will remain on the balance of the bridge upon exit. Inflation will not be returned to a user's balance. This maintains the 1 to 1 ratio of bridged tokens necessary for OmniBridge functionality.\nUsers are free to bridge these tokens but need to be aware that any accrued inflation will not be added to their balances. Usage of the accumulated inflation will be determined at a later time by bridge governors.\nA partial token list of inflationary tokens is included below:"}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Click to View List"}),(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Name"}),(0,s.jsx)(i.th,{children:"Symbol"}),(0,s.jsx)(i.th,{children:"Address"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Lido Staked Ether"}),(0,s.jsx)(i.td,{children:"stETH"}),(0,s.jsx)(i.td,{children:"0xae7ab96520de3a18e5e111b5eaab095312d7fe84"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"StakeHound Staked Ether"}),(0,s.jsx)(i.td,{children:"STETH"}),(0,s.jsx)(i.td,{children:"0xdfe66b14d37c77f4e9b180ceb433d1b164f0281d"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"ankrETH"}),(0,s.jsx)(i.td,{children:"AETH"}),(0,s.jsx)(i.td,{children:"0xe95a203b1a91a908f9b9ce46459d101078c2c3cb"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Cream ETH 2"}),(0,s.jsx)(i.td,{children:"CRETH2"}),(0,s.jsx)(i.td,{children:"0xcbc1065255cbc3ab41a6868c22d1f1c573ab89fd"})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Binance ETH staking"}),(0,s.jsx)(i.td,{children:"BETH"}),(0,s.jsx)(i.td,{children:"0x250632378e573c6be1ac2f97fcdf00515d0aa91b"})]})]})]})]}),"\n",(0,s.jsx)(i.p,{children:"Additional References:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsxs)(i.li,{children:[(0,s.jsxs)(i.a,{href:"https://forum.gnosis.io/t/gip-31-should-gnosis-chain-perform-a-hardfork-to-upgrade-the-token-contract-vulnerable-to-the-reentrancy-attack/413",children:["GIP-31: Hardfork that removed ",(0,s.jsx)(i.code,{children:"transferAfterCall"})," from Bridged Token methods"]})," (also see ",(0,s.jsx)(i.a,{href:"https://hackmd.io/@koal/SJiDiO0bc",children:"writeup"}),")"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"canonical-token-registries",children:"Canonical Token Registries"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://gnosis.blockscout.com/tokens?tab=bridged",children:"Canonical Bridged Tokens"})}),"\n",(0,s.jsxs)(i.li,{children:["Select the origin chain by using ",(0,s.jsx)(i.strong,{children:"Filter"})," option."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"multiple-representations",children:"Multiple Representations"}),"\n",(0,s.jsx)(i.p,{children:"In a multi-chain world, some assets (e.g. USDC) can be bridged over from different chains. This is because the two bridges create different representation of the token on Gnosis, even if the underlying asset is the same."}),"\n",(0,s.jsx)(i.p,{children:"For example, there are two different representations of USDC on Gnosis:"}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Asset"}),(0,s.jsx)(i.th,{children:"Token Contract"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"USDC from Ethereum"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0xDDAfbb505ad214D7b80b1f830fcCc89B60fb7A83",children:"0xDDAfbb505ad214D7b80b1f830fcCc89B60fb7A83"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"USDC from BSC"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0xD10Cc63531a514BBa7789682E487Add1f15A51E2",children:"0xD10Cc63531a514BBa7789682E487Add1f15A51E2"})})]})]})]}),"\n",(0,s.jsx)(i.p,{children:'Gnosis adopts a naming convention where the "chain of origin" is added as a suffix to the token name (e.g. USDC from Ethereum, USDC from BSC)'}),"\n",(0,s.jsx)(i.h2,{id:"managing-the-bridge",children:"Managing the Bridge"}),"\n",(0,s.jsx)(i.p,{children:"Bridge administrators can perform 4 groups of operations with the xDai bridge. All operations are performed by owners of the Multisignature Wallet which requires several accounts to confirm the operation transaction."}),"\n",(0,s.jsxs)(i.table,{children:[(0,s.jsx)(i.thead,{children:(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.th,{children:"Network"}),(0,s.jsx)(i.th,{children:"Multisignature Wallet Address"})]})}),(0,s.jsxs)(i.tbody,{children:[(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"ETH Mainnet"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://etherscan.io/address/0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd",children:"0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd"})})]}),(0,s.jsxs)(i.tr,{children:[(0,s.jsx)(i.td,{children:"Gnosis"}),(0,s.jsx)(i.td,{children:(0,s.jsx)(i.a,{href:"https://gnosisscan.io/address/0x0d3726e5a9f37234d6b55216fc971d30f150a60f",children:"0x0d3726e5a9f37234d6b55216fc971d30f150a60f"})})]})]})]}),"\n",(0,s.jsx)(i.h3,{id:"interacting-with-bridge-contracts",children:"Interacting with Bridge Contracts"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["One of the multisig wallet owners encodes the method call with a set of parameters (if any). For example, this can be done with the ",(0,s.jsx)(i.a,{href:"https://abi.hashex.org/",children:"ABI Encoding Service"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["The encoded sequence of bytes is used to create a transaction for the multisig wallet contract. This is done with the ",(0,s.jsx)(i.code,{children:"submitTransaction()"})," method of the multisig wallet contract. The method raises the event ",(0,s.jsx)(i.code,{children:"Submission"})," containing the index of the registered transaction. The index is shared with the other owners of the wallet."]}),"\n",(0,s.jsxs)(i.li,{children:["The rest of the owners confirm the transaction by invoking ",(0,s.jsx)(i.code,{children:"confirmTransaction"})," from the multisig wallet contract. As soon as enough confirmations are received, the method encoded in step 1 is invoked automatically. This is important because adequate gas limits must be set for that transaction and for the set of confirmations sent by the wallet owner finalizing the operation."]}),"\n",(0,s.jsxs)(i.li,{children:["If the method is not invoked because the gas limit is exceeded, the owners can execute the confirmed transaction manually by sending ",(0,s.jsx)(i.code,{children:"executeTransaction()"}),".",(0,s.jsx)(i.br,{}),"\n","This process can vary depending on the action being taken."]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"upgrading-bridge-contract",children:"Upgrading Bridge Contract"}),"\n",(0,s.jsx)(i.p,{children:"There are two possible scenarios for how the bridge or validators contracts can be upgraded:"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Security fix when only the contract implementation is changed"}),"\n",(0,s.jsx)(i.li,{children:"Improvement when the contract implementation upgrade requires initialization of storage values."}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["A more detailed explanation can be found on the ",(0,s.jsx)(i.a,{href:"/bridges/tokenbridge/xdai-bridge",children:"xDai Bridge page"}),". The steps are the same but the contract addresses differ."]}),"\n",(0,s.jsx)(i.h3,{id:"managing-bridge-validators",children:"Managing Bridge Validators"}),"\n",(0,s.jsxs)(i.p,{children:["Bridge validators are separate from chain validators, and currently composed of a subset of Gnosis Chain validators. This is a dynamic set, as the bridge governors can vote to increase the current set as well as propose and vote on other bridge related measures.",(0,s.jsx)(i.br,{}),"\n","After a ballot is finalized, the new validator is added to the bridge management multisignature wallets (one on each side of the bridge).\nThe submitter will execute these methods: ",(0,s.jsx)(i.code,{children:"addValidator"})," and (optionally if the voting threshold is to be changed) the ",(0,s.jsx)(i.code,{children:"setRequiredSignatures"})," method. After encoding the data for each of these methods, it is sent to each contract (one on either side of the bridge) using the ",(0,s.jsx)(i.code,{children:"submitTransaction()"})," execution method."]}),"\n",(0,s.jsxs)(i.admonition,{type:"info",children:[(0,s.jsx)(i.p,{children:"Before starting, current validators should determine:"}),(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Who will add the new validator (the submitter)"}),"\n",(0,s.jsx)(i.li,{children:"Coordinate a time when the other validators will confirm the transaction, as the bridge will be stopped to complete the upgrade."}),"\n",(0,s.jsx)(i.li,{children:"Ask the Omnibridge team to add a new bridge validator to the Certifier contract and confirm it has been added. This enables the node to relay bridge transactions with zero gas price."}),"\n"]})]}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-oracle-maintenance/oracle-migration-to-a-new-server",children:"TokenBridge Docs: Migrating Oracle to new Server"})}),"\n"]}),"\n",(0,s.jsxs)(i.p,{children:["Additional steps for setting up a validator node can be found in ",(0,s.jsx)(i.a,{href:"/bridges/governance/#how-to-setup",children:"governance"})," and ",(0,s.jsx)(i.a,{href:"https://github.com/gnosischain/documentation/issues/72",children:"here"})]})]})}function o(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}function x(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},82329:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/amb-bridge-contract-flow-mediator-986a2eae6578f036e605c07e6b8e954d.svg"},44506:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/amb-bridge-validator-flow-af9e218e97a705bd8b55c0c334cd530e.png"},80743:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/token-bridge-01-53e85ca3fe1fa69ecb3fe1bb4497b2e7.png"},30060:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/token-bridge-02-9859b439efc1898bf7515ff8aeda222c.png"},28453:(e,i,n)=>{n.d(i,{R:()=>d,x:()=>a});var s=n(96540);const t={},r=s.createContext(t);function d(e){const i=s.useContext(r);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(r.Provider,{value:i},e.children)}}}]);