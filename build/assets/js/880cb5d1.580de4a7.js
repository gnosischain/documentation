"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[76250],{39295:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>l,toc:()=>d});var r=t(74848),i=t(28453),o=t(16847);const s={title:"Nethermind"},a="Nethermind",l={id:"node/manual/execution/nethermind",title:"Nethermind",description:"Nethermind is an Execution layer client developed by the Nethermind team.",source:"@site/docs/node/manual/execution/nethermind.md",sourceDirName:"node/manual/execution",slug:"/node/manual/execution/nethermind",permalink:"/node/manual/execution/nethermind",draft:!1,unlisted:!1,editUrl:"https://github.com/gnosischain/documentation/tree/main/docs/node/manual/execution/nethermind.md",tags:[],version:"current",lastUpdatedBy:"Ruben Buniatyan",lastUpdatedAt:1706763196,formattedLastUpdatedAt:"Feb 1, 2024",frontMatter:{title:"Nethermind"},sidebar:"node",previous:{title:"Step 2: Run Execution Client",permalink:"/node/manual/execution"},next:{title:"Besu",permalink:"/node/manual/execution/besu"}},c={},d=[{value:"Option 1: Using Docker",id:"using-docker",level:2},{value:"1. Folder Structure",id:"1-folder-structure",level:3},{value:"2. Docker Compose",id:"2-docker-compose",level:3},{value:"3. JWT Secret",id:"3-jwt-secret",level:3},{value:"4. Start Container",id:"4-start-container",level:3},{value:"5. Monitor Logs",id:"5-monitor-logs",level:3},{value:"6. Updating your Node",id:"6-updating-your-node",level:3},{value:"Option 2: Running as System Process",id:"as-system-process",level:2},{value:"Installing Nethermind",id:"installing-nethermind",level:3},{value:"Running Nethermind",id:"running-nethermind",level:3},{value:"Nethermind Archival Node",id:"archival-node",level:2}];function u(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h1,{id:"nethermind",children:"Nethermind"}),"\n",(0,r.jsxs)(n.p,{children:["Nethermind is an Execution layer client developed by the ",(0,r.jsx)(n.a,{href:"https://nethermind.io/nethermind-client/",children:"Nethermind team"}),"."]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Nethermind currently holds the supermajority client position on Gnosis Chain. We suggest considering a switch to ",(0,r.jsx)(n.a,{href:"https://docs.gnosischain.com/node/manual/execution/erigon",children:"Erigon."})]})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Nethermind reference:"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.nethermind.io/nethermind/",children:"https://docs.nethermind.io/nethermind/"})}),"\n",(0,r.jsx)(n.p,{children:"There are 2 main options for running Nethermind:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Option 1: ",(0,r.jsx)(n.a,{href:"#using-docker",children:"Using Docker"})]}),"\n",(0,r.jsxs)(n.li,{children:["Option 2: ",(0,r.jsx)(n.a,{href:"#as-system-process",children:"As a system process"})]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Nethermind can be configured to run different types of nodes:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Full Node (Recommended)"}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"#archival-node",children:"Archival Node"})}),"\n"]}),"\n",(0,r.jsx)(n.admonition,{type:"note",children:(0,r.jsxs)(n.p,{children:["Ensure the prerequisite steps have been completed in ",(0,r.jsx)(n.strong,{children:"Step 1: Configure Server"}),"."]})}),"\n",(0,r.jsx)(n.h2,{id:"using-docker",children:"Option 1: Using Docker"}),"\n",(0,r.jsx)(n.h3,{id:"1-folder-structure",children:"1. Folder Structure"}),"\n",(0,r.jsx)(n.p,{children:"Create your folder structure:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"mkdir -p /home/$USER/gnosis/execution\nmkdir /home/$USER/gnosis/jwtsecret\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"/home/$USER/gnosis/\n\u251c\u2500\u2500 jwtsecret/\n\u2514\u2500\u2500 execution/\n"})}),"\n",(0,r.jsx)(n.h3,{id:"2-docker-compose",children:"2. Docker Compose"}),"\n",(0,r.jsxs)(n.p,{children:["Create a docker-compose file with your favorite text editor in ",(0,r.jsx)(n.code,{children:"/home/$USER/gnosis/docker-compose.yml"}),":"]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example Docker Compose file"}),(0,r.jsx)("div",{children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",metastring:'title="/home/$USER/gnosis/docker-compose.yml"',children:'version: "3"\nservices:\n\n  execution:\n    container_name: execution\n    image: nethermind/nethermind:latest\n    restart: always\n    stop_grace_period: 1m\n    networks:\n      - gnosis_net\n    ports:\n      - 30303:30303/tcp # p2p\n      - 30303:30303/udp # p2p\n    expose:\n      - 8545 # rpc\n      - 8551 # engine api\n    volumes:\n      - /home/$USER/gnosis/execution:/data\n      - /home/$USER/gnosis/jwtsecret/jwt.hex:/jwt.hex\n      - /etc/timezone:/etc/timezone:ro\n      - /etc/localtime:/etc/localtime:ro\n    command: |\n      --config=gnosis\n      --datadir=/data\n      --log=INFO\n      --Sync.SnapSync=false\n      --JsonRpc.Enabled=true\n      --JsonRpc.Host=0.0.0.0\n      --JsonRpc.Port=8545\n      --JsonRpc.EnabledModules=[Web3,Eth,Subscribe,Net,]\n      --JsonRpc.JwtSecretFile=/jwt.hex\n      --JsonRpc.EngineHost=0.0.0.0\n      --JsonRpc.EnginePort=8551\n      --Network.DiscoveryPort=30303\n      --HealthChecks.Enabled=false\n      --Pruning.CacheMb=2048\n    logging:\n      driver: "local"\n\nnetworks:\n  gnosis_net:\n    name: gnosis_net\n'})})})]}),"\n",(0,r.jsx)(n.h3,{id:"3-jwt-secret",children:"3. JWT Secret"}),"\n",(0,r.jsxs)(n.p,{children:["The JWT secret is a token that allows the EL client to communicate with the CL client, and is required for Nethermind to operate post-merge. We use ",(0,r.jsx)(n.code,{children:"rand"})," to create a random string, and store the ",(0,r.jsx)(n.code,{children:"jwt.hex"})," file in ",(0,r.jsx)(n.code,{children:"/home/$USER/gnosis/jwtsecret/"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["Check ",(0,r.jsx)(n.a,{href:"/node/manual/configure-server#create-jwt",children:"create JWT"})," section in ",(0,r.jsx)(n.code,{children:"Step 1: Configure Server"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"4-start-container",children:"4. Start Container"}),"\n",(0,r.jsx)(n.p,{children:"Start the Execution layer client listed in the compose file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd /home/$USER/gnosis\ndocker-compose up -d\n"})}),"\n",(0,r.jsx)(n.h3,{id:"5-monitor-logs",children:"5. Monitor Logs"}),"\n",(0,r.jsx)(n.p,{children:"Check your logs with:"}),"\n","\n","\n",(0,r.jsx)(o.Ay,{}),"\n",(0,r.jsx)(n.h3,{id:"6-updating-your-node",children:"6. Updating your Node"}),"\n",(0,r.jsx)(n.p,{children:"To update, just pull the new image, then stop and restart your docker-compose file:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"cd /home/$USER/gnosis\ndocker-compose pull\ndocker-compose stop\ndocker-compose up -d\n"})}),"\n",(0,r.jsx)(n.h2,{id:"as-system-process",children:"Option 2: Running as System Process"}),"\n",(0,r.jsx)(n.h3,{id:"installing-nethermind",children:"Installing Nethermind"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://downloads.nethermind.io/",children:"https://downloads.nethermind.io/"})}),"\n",(0,r.jsx)(n.h3,{id:"running-nethermind",children:"Running Nethermind"}),"\n",(0,r.jsx)(n.p,{children:"Nethermind has \u2018Nethermind launcher\u2019 an easy GUI where you can configure your node from release."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.a,{href:"https://docs.nethermind.io/nethermind/first-steps-with-nethermind/running-nethermind-post-merge#running-release",children:"https://docs.nethermind.io/nethermind/first-steps-with-nethermind/running-nethermind-post-merge#running-release"})}),"\n",(0,r.jsx)(n.p,{children:"Windows"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Gnosis Mainnet\n./nethermind --config gnosis --JsonRpc.JwtSecretFile=<PATH to jwt.hex>\n\n# Chiado Testnet\n./nethermind --config chiado --JsonRpc.JwtSecretFile=<PATH to jwt.hex>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Linux and MAC"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"# Gnosis Mainnet\nnethermind --config gnosis --JsonRpc.JwtSecretFile=<PATH to jwt.hex>\n\n# Chiado Testnet\nnethermind --config chiado --JsonRpc.JwtSecretFile=<PATH to jwt.hex>\n"})}),"\n",(0,r.jsx)(n.h2,{id:"archival-node",children:"Nethermind Archival Node"}),"\n",(0,r.jsx)(n.p,{children:"An archival node executes a heavy historical sync verifying all the transactions and keeping all of the historical data. Archive sync is the 'heaviest' and slowest sync mode, and can take 2 - 6 weeks depending on the speed of your IO."}),"\n",(0,r.jsx)(n.admonition,{type:"caution",children:(0,r.jsx)(n.p,{children:"Make sure there's enough disk space to accommodate the archive data, the minimum amount of disk required to run the archive node is +2 TB (Feb 2023)."})}),"\n",(0,r.jsxs)(n.p,{children:["Edit your ",(0,r.jsx)(n.code,{children:"/home/$USER/gnosis/docker-compose.yml"})," and change the ",(0,r.jsx)(n.code,{children:"--config"})," from ",(0,r.jsx)(n.code,{children:"gnosis"})," to ",(0,r.jsx)(n.code,{children:"gnosis_archive"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"    command: |\n      --config=gnosis_archive\n"})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(u,{...e})}):u(e)}},16847:(e,n,t)=>{t.d(n,{Ay:()=>l});var r=t(74848),i=t(28453),o=t(49489),s=t(7227);function a(e){const n={code:"code",pre:"pre",...(0,i.R)(),...e.components};return(0,r.jsxs)(o.A,{children:[(0,r.jsx)(s.A,{value:"execution",label:"execution",default:!0,children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"docker logs -f --tail 500 execution\n"})})}),(0,r.jsx)(s.A,{value:"consensus",label:"consensus",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"docker logs -f --tail 500 consensus\n"})})}),(0,r.jsx)(s.A,{value:"validator",label:"validator",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-shell",children:"docker logs -f --tail 500 validator\n"})})})]})}function l(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},7227:(e,n,t)=>{t.d(n,{A:()=>s});t(96540);var r=t(18215);const i={tabItem:"tabItem_Ymn6"};var o=t(74848);function s(e){let{children:n,hidden:t,className:s}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(i.tabItem,s),hidden:t,children:n})}},49489:(e,n,t)=>{t.d(n,{A:()=>w});var r=t(96540),i=t(18215),o=t(24245),s=t(56347),a=t(36494),l=t(62814),c=t(45167),d=t(81269);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:i}}=e;return{value:n,label:t,attributes:r,default:i}}))}(t);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const i=(0,s.W6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(o),(0,r.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(i.location.search);n.set(o,e),i.replace({...i.location,search:n.toString()})}),[o,i])]}function x(e){const{defaultValue:n,queryString:t=!1,groupId:i}=e,o=h(e),[s,l]=(0,r.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:o}))),[c,u]=p({queryString:t,groupId:i}),[x,g]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[i,o]=(0,d.Dv)(t);return[i,(0,r.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:i}),f=(()=>{const e=c??x;return m({value:e,tabValues:o})?e:null})();(0,a.A)((()=>{f&&l(f)}),[f]);return{selectedValue:s,selectValue:(0,r.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),g(e)}),[u,g,o]),tabValues:o}}var g=t(11062);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var j=t(74848);function v(e){let{className:n,block:t,selectedValue:r,selectValue:s,tabValues:a}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),d=e=>{const n=e.currentTarget,t=l.indexOf(n),i=a[t].value;i!==r&&(c(n),s(i))},u=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,j.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.A)("tabs",{"tabs--block":t},n),children:a.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,j.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>l.push(e),onKeyDown:u,onClick:d,...o,className:(0,i.A)("tabs__item",f.tabItem,o?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function b(e){let{lazy:n,children:t,selectedValue:i}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===i));return e?(0,r.cloneElement)(e,{className:"margin-top--md"}):null}return(0,j.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==i})))})}function y(e){const n=x(e);return(0,j.jsxs)("div",{className:(0,i.A)("tabs-container",f.tabList),children:[(0,j.jsx)(v,{...e,...n}),(0,j.jsx)(b,{...e,...n})]})}function w(e){const n=(0,g.A)();return(0,j.jsx)(y,{...e,children:u(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>s,x:()=>a});var r=t(96540);const i={},o=r.createContext(i);function s(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);