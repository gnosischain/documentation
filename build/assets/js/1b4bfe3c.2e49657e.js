"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[5553],{91347:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>d,toc:()=>l});var n=i(74848),s=i(28453);const o={title:"Validator Deposits"},a=void 0,d={id:"node/manual/validator/deposit",title:"Validator Deposits",description:"Overview",source:"@site/docs/node/manual/validator/deposit.md",sourceDirName:"node/manual/validator",slug:"/node/manual/validator/deposit",permalink:"/node/manual/validator/deposit",draft:!1,unlisted:!1,editUrl:"https://github.com/gnosischain/documentation/tree/main/docs/node/manual/validator/deposit.md",tags:[],version:"current",lastUpdatedBy:"Dee",lastUpdatedAt:1705404574,formattedLastUpdatedAt:"Jan 16, 2024",frontMatter:{title:"Validator Deposits"},sidebar:"node",previous:{title:"Nimbus",permalink:"/node/manual/validator/run/nimbus"},next:{title:"Verify Validator",permalink:"/node/manual/validator/verify"}},r={},l=[{value:"Overview",id:"overview",level:2},{value:"Pre-requisites",id:"pre-requisites",level:3},{value:"GNO on Gnosis Chain",id:"gno-on-gnosis-chain",level:3},{value:"Option 1: Deposit UI",id:"option-1-deposit-ui",level:2},{value:"Step 1: Connect your Wallet",id:"step-1-connect-your-wallet",level:3},{value:"Step 2: Upload <code>deposit_data.json</code>",id:"step-2-upload-deposit_datajson",level:3},{value:"Step 3: Validate Deposit data",id:"step-3-validate-deposit-data",level:3},{value:"Step 4: Acknowledge Risks",id:"step-4-acknowledge-risks",level:3},{value:"Step 5: Verify Transaction Parameters",id:"step-5-verify-transaction-parameters",level:3},{value:"Step 6: Complete Deposit",id:"step-6-complete-deposit",level:3},{value:"Step 7: Validator Activation",id:"step-7-validator-activation",level:3},{value:"Option 2: Direct interaction with Contracts",id:"option-2-direct-interaction-with-contracts",level:2},{value:"Step 1: Get Deposit Script",id:"step-1-get-deposit-script",level:3},{value:"Step 2: Configure <code>.env</code> file",id:"step-2-configure-env-file",level:3},{value:"Step 3: Import <code>deposit_data.json</code> files",id:"step-3-import-deposit_datajson-files",level:3},{value:"Step 4: Run Deposit script",id:"step-4-run-deposit-script",level:3},{value:"Step 5: Validator Activation",id:"step-5-validator-activation",level:3},{value:"Appendix",id:"appendix",level:2},{value:"Depositing For Chiado Testnet",id:"depositing-for-chiado-testnet",level:3}];function c(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.h2,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"You will need to make a deposit of 1 GNO for each validator."}),"\n",(0,n.jsx)(t.li,{children:"You can make a bulk deposit for up to 128 validators at a time."}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Execution Layer client and Beacon Node should be fully synced"}),"\n",(0,n.jsx)(t.li,{children:"Validator process should already be running"}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"gno-on-gnosis-chain",children:"GNO on Gnosis Chain"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["Validators need to be funded using ",(0,n.jsx)(t.a,{href:"/concepts/tokens/gno",children:"GNO on Gnosis Chain"})]}),"\n",(0,n.jsx)(t.li,{children:"You will need to bridge GNO over from Ethereum to Gnosis Chain"}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsxs)(t.p,{children:["You can use ",(0,n.jsx)(t.a,{href:"https://transferto.xyz/",children:"Transferto.xyz"})," or the ",(0,n.jsx)(t.a,{href:"https://omni.gnosischain.com/bridge",children:"Omnibridge"})," to bridge GNO from Ethereum to Gnosis Chain."]})}),"\n",(0,n.jsx)(t.h2,{id:"option-1-deposit-ui",children:"Option 1: Deposit UI"}),"\n",(0,n.jsx)(t.h3,{id:"step-1-connect-your-wallet",children:"Step 1: Connect your Wallet"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Go to ",(0,n.jsx)(t.a,{href:"https://deposit.gnosischain.com",children:"https://deposit.gnosischain.com/"})," and connect your web3 wallet on the Gnosis Chain to the application."]}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"In this example we use MetaMask."}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(44e3).A+"",width:"2208",height:"1576"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(22621).A+"",width:"2208",height:"1576"})}),"\n",(0,n.jsxs)(t.h3,{id:"step-2-upload-deposit_datajson",children:["Step 2: Upload ",(0,n.jsx)(t.code,{children:"deposit_data.json"})]}),"\n",(0,n.jsxs)(t.ol,{start:"2",children:["\n",(0,n.jsxs)(t.li,{children:["Select the Deposit tab. Upload your ",(0,n.jsx)(t.code,{children:"deposit_data.json"})," file from ",(0,n.jsx)(t.a,{href:"/node/manual#step-4-run-a-validator",children:"Step 4 of the interactive guide"})," It will be located in the same folder as the generated keystores."]}),"\n"]}),"\n",(0,n.jsx)(t.admonition,{type:"note",children:(0,n.jsxs)(t.p,{children:["If you can't upload the file, you may want to check the file permissions to make sure the user account you are logged in as has read permissions. You can grant permissions using the ",(0,n.jsx)(t.code,{children:"sudo chmod"})," command."]})}),"\n",(0,n.jsx)("img",{src:"/img/node/upload-info1.png",width:"500"}),"\n",(0,n.jsx)(t.h3,{id:"step-3-validate-deposit-data",children:"Step 3: Validate Deposit data"}),"\n",(0,n.jsxs)(t.ol,{start:"3",children:["\n",(0,n.jsxs)(t.li,{children:["The app will validate the json file and list the number of validator deposits you are making and the required GNO to deposit. Click ",(0,n.jsx)(t.strong,{children:"Deposit"})," to continue."]}),"\n"]}),"\n",(0,n.jsx)("img",{src:"/img/node/deposit-2.png",width:"500"}),"\n",(0,n.jsx)(t.h3,{id:"step-4-acknowledge-risks",children:"Step 4: Acknowledge Risks"}),"\n",(0,n.jsxs)(t.ol,{start:"4",children:["\n",(0,n.jsxs)(t.li,{children:["Check that you understand the risks and ",(0,n.jsx)(t.a,{href:"#step-5-verify-transaction-parameters",children:"ensure you are interacting with the correct contract"})," before proceeding."]}),"\n"]}),"\n",(0,n.jsx)("img",{src:"/img/node/deposit-3.png",width:"500"}),"\n",(0,n.jsx)("br",{}),"\n",(0,n.jsx)("img",{src:"/img/node/deposit-4.png",width:"500"}),"\n",(0,n.jsx)(t.h3,{id:"step-5-verify-transaction-parameters",children:"Step 5: Verify Transaction Parameters"}),"\n",(0,n.jsx)(t.p,{children:"You are responsible for the transaction. Fraudulent websites might try to lure you into sending funds to them, instead of the official deposit contract. Make sure that you are sending the transaction with the correct data."}),"\n",(0,n.jsxs)(t.admonition,{type:"caution",children:[(0,n.jsxs)(t.p,{children:["Verify that the contract address you're interacting with is ",(0,n.jsx)(t.a,{href:"https://gnosis.blockscout.com/address/0x9C58BAcC331c9aa871AFD802DB6379a98e80CEdb/transactions",children:"0x9C58BAcC331c9aa871AFD802DB6379a98e80CEdb"})," (GNO on Gnosis Chain)"]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(2969).A+"",width:"690",height:"374"})})]}),"\n",(0,n.jsxs)(t.admonition,{type:"caution",children:[(0,n.jsxs)(t.p,{children:["Check that the transaction uses the ",(0,n.jsx)(t.code,{children:"transferAndCall"})," method."]}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(54786).A+"",width:"690",height:"528"})})]}),"\n",(0,n.jsxs)(t.admonition,{type:"caution",children:[(0,n.jsxs)(t.p,{children:["Check that the transaction's data includes the Deposit Contract address (",(0,n.jsx)(t.a,{href:"https://gnosis.blockscout.com/address/0x0B98057eA310F4d31F2a452B414647007d1645d9/transactions",children:"0x0B98057eA310F4d31F2a452B414647007d1645d9"}),")"]}),(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{children:"0x4000aea00000000000000000000000000b98057ea310f4d31f2a452b414647007d1645d9\n"})}),(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(75915).A+"",width:"344",height:"503"})})]}),"\n",(0,n.jsx)(t.h3,{id:"step-6-complete-deposit",children:"Step 6: Complete Deposit"}),"\n",(0,n.jsxs)(t.ol,{start:"5",children:["\n",(0,n.jsx)(t.li,{children:"Complete the deposit."}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(92953).A+"",width:"1938",height:"1328"})}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{src:i(43862).A+"",width:"1108",height:"594"})}),"\n",(0,n.jsx)(t.h3,{id:"step-7-validator-activation",children:"Step 7: Validator Activation"}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsx)(t.p,{children:"It will take about 1.5 hours for your validators to start proposing and attesting to blocks."})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Following a successful deposit, the Gnosis Beacon Chain will wait for 1024 Gnosis Chain blocks plus up to 64 Gnosis Beacon Chain epochs before adding validators to the pool."}),"\n",(0,n.jsx)(t.li,{children:"This is roughly 1 hour and 25 minutes before the validators start proposing and attesting blocks on the Gnosis Chain."}),"\n",(0,n.jsxs)(t.li,{children:['Once live, you can view your validator(s) on the explorer. Copy the pubkey(s) listed in the deposit_data.json file (a key will be generated for each validator as "pubkey": "<your-public-key>") and paste into the search box at ',(0,n.jsx)(t.a,{href:"https://gnosischa.in/",children:"https://gnosischa.in/"}),"."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"option-2-direct-interaction-with-contracts",children:"Option 2: Direct interaction with Contracts"}),"\n",(0,n.jsx)(t.p,{children:"A modification to the Gnosis Chain deposit contract allows you to deposit in batches (this functionality is not available for the ETH2 deposit contract). One transaction can be used to initiate deposits for up to 128 validators. The assumption is that every validator deposits 1 GNO(which is converted to 32mGNO) in every entry of the batch. The following script simplifies the process."}),"\n",(0,n.jsx)(t.h3,{id:"step-1-get-deposit-script",children:"Step 1: Get Deposit Script"}),"\n",(0,n.jsx)(t.p,{children:"Pull the docker image with the deposit script:"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"docker pull ghcr.io/gnosischain/deposit-script:latest\n"})}),"\n",(0,n.jsxs)(t.h3,{id:"step-2-configure-env-file",children:["Step 2: Configure ",(0,n.jsx)(t.code,{children:".env"})," file"]}),"\n",(0,n.jsxs)(t.p,{children:["Prepare ",(0,n.jsx)(t.code,{children:".env"})," file with the following lines:"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"STAKING_ACCOUNT_PRIVATE_KEY=0000000000000000000000000000000000000000000000000000000000000000\n\nRPC_URL=https://rpc.gnosischain.com\nGAS_PRICE=2000000000\n\n# number of deposits in one transaction, should be in range [1, 128]\nBATCH_SIZE=128\n# total number of deposits to read from file\nN=256\n# index of the first deposit to read from file\nOFFSET=0\n\n# address of the GNO token\nTOKEN_ADDRESS=0x9C58BAcC331c9aa871AFD802DB6379a98e80CEdb\n# address of the GBC deposit contract\nDEPOSIT_CONTRACT_ADDRESS=0x0B98057eA310F4d31F2a452B414647007d1645d9\n# block where the deposit contract was deployed at\nSTART_BLOCK_NUMBER=19469077\n"})}),"\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"STAKING_ACCOUNT_PRIVATE_KEY"})," is the private key of the account which holds the necessary amount of GNO tokens for deposit. Any account may be used for funding, but it must also have a small amount of xDai to process transactions. In the above example, 2 transactions will occur with 256 total deposits of 1 GNO each."]}),"\n",(0,n.jsxs)(t.h3,{id:"step-3-import-deposit_datajson-files",children:["Step 3: Import ",(0,n.jsx)(t.code,{children:"deposit_data.json"})," files"]}),"\n",(0,n.jsxs)(t.p,{children:["Copy the ",(0,n.jsx)(t.code,{children:"deposit_data.json"})," generated during ",(0,n.jsx)(t.a,{href:"/node/manual#step-4-run-a-validator",children:"Step 4 of the interactive guide"})," to the current directory."]}),"\n",(0,n.jsx)(t.h3,{id:"step-4-run-deposit-script",children:"Step 4: Run Deposit script"}),"\n",(0,n.jsxs)(t.p,{children:["Run the deposit script (",(0,n.jsx)(t.code,{children:"/path/to/"})," should be a valid path to the .env file you have created):"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-bash",children:"docker run --rm --env-file /path/to/.env \\\n    -v $(pwd)/deposit_data-xxxxxxxxxx.json:/tmp/deposit_data.json \\\n    ghcr.io/gnosischain/deposit-script:latest /tmp/deposit_data.json\n"})}),"\n",(0,n.jsx)(t.h3,{id:"step-5-validator-activation",children:"Step 5: Validator Activation"}),"\n",(0,n.jsx)(t.admonition,{type:"tip",children:(0,n.jsx)(t.p,{children:"It will take about 1.5 hours for your validators to start proposing and attesting to blocks."})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Following a successful deposit, the Gnosis Beacon Chain will wait for 1024 Gnosis Chain blocks plus up to 64 Gnosis Beacon Chain epochs before adding validators to the pool."}),"\n",(0,n.jsx)(t.li,{children:"This is roughly 1 hour and 25 minutes before the validators start proposing and attesting blocks on the Gnosis Chain."}),"\n",(0,n.jsxs)(t.li,{children:['Once live, you can view your validator(s) on the explorer. Copy the pubkey(s) listed in the deposit_data.json file (a key will be generated for each validator as "pubkey": "<your-public-key>") and paste into the search box at ',(0,n.jsx)(t.a,{href:"https://gnosischa.in/",children:"https://gnosischa.in//"}),"."]}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"appendix",children:"Appendix"}),"\n",(0,n.jsx)(t.h3,{id:"depositing-for-chiado-testnet",children:"Depositing For Chiado Testnet"}),"\n",(0,n.jsx)(t.p,{children:"Required:"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsxs)(t.li,{children:["Chiado Testnet xDai: ",(0,n.jsx)(t.a,{href:"https://faucet.chiadochain.net/",children:"https://faucet.chiadochain.net/"})]}),"\n",(0,n.jsx)(t.li,{children:"Chiado Testnet GNO: This can be obtained from discord upon request"}),"\n"]}),"\n",(0,n.jsxs)(t.p,{children:["You can run the ",(0,n.jsx)(t.a,{href:"https://deposit.gnosischain.com",children:"deposit UI"})," locally following its repository ",(0,n.jsx)(t.code,{children:"README"})," instructions:\n",(0,n.jsx)(t.a,{href:"https://github.com/gnosischain/gbc-deposit-ui#gnosis-beacon-chain-deposit-ui",children:"https://github.com/gnosischain/gbc-deposit-ui#gnosis-beacon-chain-deposit-ui"})]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(c,{...e})}):c(e)}},44e3:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/UI-1A-ce90bf8db0d6eaafa07e1520a0c175d8.png"},22621:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/UI-2A-2adee8243759b95743a3a3b1184aa8fa.png"},92953:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/confirm-7179860f162e1090774efa85123e16c8.png"},43862:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/dep-made-4750f4ef6a7d56f48233fb42d136a87b.png"},2969:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/safety-1-11f49b04dc49eec43fee558705b314ec.png"},54786:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/safety-2-b035c1f2df068357725d1cdbf15ed325.png"},75915:(e,t,i)=>{i.d(t,{A:()=>n});const n=i.p+"assets/images/safety-3-03d7291a431a318c5e4ffb4326aaa36e.png"},28453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>d});var n=i(96540);const s={},o=n.createContext(s);function a(e){const t=n.useContext(o);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function d(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),n.createElement(o.Provider,{value:t},e.children)}}}]);