"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[31501],{30586:(e,i,s)=>{s.r(i),s.d(i,{assets:()=>c,contentTitle:()=>d,default:()=>l,frontMatter:()=>r,metadata:()=>a,toc:()=>o});var n=s(74848),t=s(28453);const r={title:"xDai Bridge",description:"The xDai bridge is a native Dai bridge from Ethereum that is used to mint and burn xDai, the native asset used for gas and transaction fees on Gnosis.",keywords:["xdai bridge","bridge","dai","ethereum","gnosis bridge"]},d="xDai Bridge",a={id:"bridges/tokenbridge/xdai-bridge",title:"xDai Bridge",description:"The xDai bridge is a native Dai bridge from Ethereum that is used to mint and burn xDai, the native asset used for gas and transaction fees on Gnosis.",source:"@site/docs/bridges/tokenbridge/xdai-bridge.md",sourceDirName:"bridges/tokenbridge",slug:"/bridges/tokenbridge/xdai-bridge",permalink:"/bridges/tokenbridge/xdai-bridge",draft:!1,unlisted:!1,editUrl:"https://github.com/gnosischain/documentation/tree/main/docs/bridges/tokenbridge/xdai-bridge.md",tags:[],version:"current",lastUpdatedBy:"Dee",lastUpdatedAt:1705404574,formattedLastUpdatedAt:"Jan 16, 2024",frontMatter:{title:"xDai Bridge",description:"The xDai bridge is a native Dai bridge from Ethereum that is used to mint and burn xDai, the native asset used for gas and transaction fees on Gnosis.",keywords:["xdai bridge","bridge","dai","ethereum","gnosis bridge"]},sidebar:"bridges",previous:{title:"Arbitrary Message Bridge",permalink:"/bridges/tokenbridge/amb-bridge"},next:{title:"Omnibridge",permalink:"/bridges/tokenbridge/omnibridge"}},c={},o=[{value:"Key Information",id:"key-information",level:2},{value:"Overview",id:"overview",level:3},{value:"Key Contracts",id:"key-contracts",level:3},{value:"Ethereum",id:"ethereum",level:3},{value:"Gnosis",id:"gnosis",level:3},{value:"Goerli",id:"goerli",level:3},{value:"Chiado",id:"chiado",level:3},{value:"Savings xDAI",id:"savings-xdai",level:3},{value:"Rationale",id:"rationale",level:4},{value:"Interest rate",id:"interest-rate",level:4},{value:"Architecture",id:"architecture",level:4},{value:"Ethereum",id:"ethereum-1",level:4},{value:"Gnosis Chain",id:"gnosis-chain",level:4},{value:"Role and responsibilities",id:"role-and-responsibilities",level:4},{value:"Contracts",id:"contracts",level:4},{value:"Fees &amp; Daily Limits",id:"fees--daily-limits",level:3},{value:"Bridge Validators",id:"bridge-validators",level:3},{value:"Bridge Validator Flow",id:"bridge-validator-flow",level:3},{value:"Bridge Governance",id:"bridge-governance",level:3},{value:"Bridge Revenue",id:"bridge-revenue",level:3},{value:"Analytics",id:"analytics",level:3},{value:"How it Works",id:"how-it-works",level:2},{value:"Ethereum -&gt; Gnosis Chain.",id:"ethereum---gnosis-chain",level:3},{value:"Gnosis Chain -&gt; Ethereum.",id:"gnosis-chain---ethereum",level:3},{value:"Managing Bridge Contracts",id:"managing-bridge-contracts",level:2},{value:"Upgrading a Contract",id:"upgrading-a-contract",level:3},{value:"Basic Process",id:"basic-process",level:4},{value:"Security Upgrade",id:"security-upgrade",level:4},{value:"Bridge Improvement",id:"bridge-improvement",level:4},{value:"Resources",id:"resources",level:2}];function h(e){const i={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components},{TabItem:r,Tabs:d}=i;return r||x("TabItem",!0),d||x("Tabs",!0),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(i.h1,{id:"xdai-bridge",children:"xDai Bridge"}),"\n",(0,n.jsx)(i.admonition,{type:"info",children:(0,n.jsxs)(i.p,{children:["The xDai bridge can be found at ",(0,n.jsx)(i.a,{href:"https://bridge.gnosischain.com/",children:"bridge.gnosischain.com"})]})}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.a,{href:"https://bridge.gnosischain.com",children:"xDai bridge"})," is a native Dai bridge from Ethereum that is used to mint and burn ",(0,n.jsx)(i.a,{href:"/concepts/tokens/xdai",children:"xDai"}),", the native asset used for gas and transaction fees on Gnosis."]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{alt:"xDai Bridge Diagram",src:s(17082).A+"",width:"1225",height:"611"})}),"\n",(0,n.jsxs)(i.p,{children:["Once Dai is bridged into the xDai bridge, the xDai bridge contract on Gnosis notifies the ",(0,n.jsx)(i.a,{href:"#block-rewards-contract",children:"block rewards contract"}),". The consensus algorithm then mints xDai to the user's corresponding address on Gnosis in the next block."]}),"\n",(0,n.jsx)(i.h2,{id:"key-information",children:"Key Information"}),"\n",(0,n.jsx)(i.h3,{id:"overview",children:"Overview"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{}),(0,n.jsx)(i.th,{children:"Detail"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Frontend URL"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://bridge.gnosischain.com",children:"https://bridge.gnosischain.com"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Trust Model"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"#bridge-validators",children:"4-of-7 Validator Multisig"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Governance"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"#bridge-governance",children:"8-of-16 Multisig"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Governance Parameters"}),(0,n.jsx)(i.td,{children:"Validator Set, Daily Limits, Fees"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Bug Bounty"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://immunefi.com/bounty/gnosischain/",children:"Up to $2m"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Bug Reporting"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://immunefi.com/bounty/gnosischain/",children:"Immunefi"})})]})]})]}),"\n",(0,n.jsx)(i.h3,{id:"key-contracts",children:"Key Contracts"}),"\n",(0,n.jsxs)(d,{children:[(0,n.jsxs)(r,{value:"ethereum",label:"Ethereum",children:[(0,n.jsx)(i.h3,{id:"ethereum",children:"Ethereum"}),(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Ethereum Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Proxy Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0x4aa42145Aa6Ebf72e164C9bBC74fbD3788045016#readProxyContract",children:"eth:0x4aa42145Aa6Ebf72e164C9bBC74fbD3788045016"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Validator Management Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0xe1579dEbdD2DF16Ebdb9db8694391fa74EeA201E#code",children:"eth:0xe1579dEbdD2DF16Ebdb9db8694391fa74EeA201E"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Admin Multisignature Wallet"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd",children:"eth:0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd"})})]})]})]})]}),(0,n.jsxs)(r,{value:"gnosis",label:"Gnosis",children:[(0,n.jsx)(i.h3,{id:"gnosis",children:"Gnosis"}),(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Gnosis Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Proxy Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x7301CFA0e1756B71869E93d4e4Dca5c7d0eb0AA6#address-tabs",children:"gno:0x7301CFA0e1756B71869E93d4e4Dca5c7d0eb0AA6"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Block Reward Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x481c034c6d9441db23Ea48De68BCAe812C5d39bA",children:"gno:0x481c034c6d9441db23Ea48De68BCAe812C5d39bA"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Validator Management Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0xB289f0e6fBDFf8EEE340498a56e1787B303F1B6D/read-proxy",children:"gno:0xB289f0e6fBDFf8EEE340498a56e1787B303F1B6D"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Admin Multisignature Wallet"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x0D3726e5a9f37234D6B55216fC971D30F150a60F/transactions#address-tabs",children:"gno:0x0d3726e5a9f37234d6b55216fc971d30f150a60f"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"ERC20ToNative Helper Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x2d51eaa266eafcb59bb36dd3c7e99c515e58113a#readContract",children:"gno:0x2D51EAa266eafcb59bB36dD3c7E99C515e58113A"})})]})]})]})]}),(0,n.jsxs)(r,{value:"goerli",label:"Goerli",children:[(0,n.jsx)(i.h3,{id:"goerli",children:"Goerli"}),(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Proxy Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://goerli.etherscan.io/address/0x8659Cf2273438f9b5C1Eb367Def45007a7A16a24",children:"0x8659Cf2273438f9b5C1Eb367Def45007a7A16a24"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Validator Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://goerli.etherscan.io/address/0x1F35121d14ABC91689a7903bf911dce83B0c6EF6",children:"0x1F35121d14ABC91689a7903bf911dce83B0c6EF6"})})]})]})]})]}),(0,n.jsxs)(r,{value:"chiado",label:"Chiado",children:[(0,n.jsx)(i.h3,{id:"chiado",children:"Chiado"}),(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Proxy Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis-chiado.blockscout.com/address/0xbb3c86f9918C3C1d83668fA84e79E876d147fFf2",children:"0xbb3c86f9918C3C1d83668fA84e79E876d147fFf2"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Validator Contract"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis-chiado.blockscout.com/address/0x0ee7EBC72b26e8CeAbbdF275A19dA8e4361685Ce",children:"0x0ee7EBC72b26e8CeAbbdF275A19dA8e4361685Ce"})})]})]})]})]})]}),"\n",(0,n.jsx)(i.admonition,{type:"info",children:(0,n.jsxs)(i.p,{children:["The current deployment of xDAI bridge contract is from ",(0,n.jsx)(i.a,{href:"https://github.com/gnosischain/tokenbridge-contracts/tree/xdaibridge-upgrade-sdai",children:"tokenbridge-contracts/xdaibridge-upgrade-sdai"}),", with the commit hash ",(0,n.jsx)(i.code,{children:"bf602f35e624cc6c58c827e7c56b23c8b1afa69a"})]})}),"\n",(0,n.jsx)(i.p,{children:"References:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/about",children:"TokenBridge Docs: About xDai Bridge"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-contracts-management",children:"TokenBridge Docs: Bridge Contract Management"})}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"savings-xdai",children:"Savings xDAI"}),"\n",(0,n.jsxs)(i.p,{children:["Application: ",(0,n.jsx)(i.a,{href:"https://agave.finance/sdai/",children:"https://agave.finance/sdai/"})]}),"\n",(0,n.jsx)(i.h4,{id:"rationale",children:"Rationale"}),"\n",(0,n.jsxs)(i.p,{children:["MakerDAO\u2019s DSR current rate is 5%. Since the increase of the DSR to ~3.5%, ~7M DAI have fled out of the xDAI bridge, as can be seen on this\xa0",(0,n.jsx)(i.a,{href:"https://dune.com/queries/2650075/4403805?d=11",children:"dashboard"}),". Bridging the DSR yield into Gnosis Chain will help regain these deposits. In order to provide the needed catalyst for Gnosis Chain Defi to boom, interest rates on Gnosis Chain have to pick up or reach parity with Ethereum or other chains with higher borrowing demand."]}),"\n",(0,n.jsx)(i.p,{children:"Introducing Savings DAI (sDAI), a DSR(Dai Savings Rate) module in xDAI Bridge between Ethereum and Gnosis Chain."}),"\n",(0,n.jsx)(i.p,{children:"By depositing most of the DAI in xDAI bridge into sDAI vault from Spark Protocol on Ethereum, which is a ERC4626 vault depositing all DAI into the Maker DSR, interest is accrued from Maker DSR and relayed to Gnosis Chain. xDAI holders on Gnosis Chain can mint sDAI with their xDAI, and enjoy the interest accumulating from Ethereum."}),"\n",(0,n.jsxs)(i.p,{children:["Check out the proposal from Karpatkey to ",(0,n.jsx)(i.strong,{children:(0,n.jsx)(i.a,{href:"https://forum.gnosis.io/t/deposit-dai-of-the-xdai-bridge-in-sdai-vault-from-spark/7236",children:"Deposit DAI of the xDAI bridge in sDAI vault from Spark"})})]}),"\n",(0,n.jsx)(i.h4,{id:"interest-rate",children:"Interest rate"}),"\n",(0,n.jsx)(i.p,{children:"Assuming the amount of \u201cSavings DAI on GC\u201d minted is lower than the one held by the bridge, then the yield will be higher than the Dai savings Rate. The bridge currently holds roughly 25M DAI and the DSR yield is 5%, assuming 25M get wrapped into sDAI and only 10M xDAI get deposited into the vault on GC, the yield will be 12.5% ."}),"\n",(0,n.jsx)(i.p,{children:"The expectation is that the sDAI rate will always be higher on GC than Mainnet, as only if almost 100% of all DAI bridged is staked will we achieve rate parity."}),"\n",(0,n.jsx)(i.p,{children:"Considering the current 25M DAI sitting in the bridge, that represents ~1.25M yearly to incentivise GC."}),"\n",(0,n.jsxs)(i.p,{children:["DSR yield is risk-free if you are already holding DAI. All the risks derived from the collateral are borne by all DAI holders, regardless of them depositing in the DSR. Karpatkey team have written a research piece ",(0,n.jsx)(i.a,{href:"https://www.karpatkey.com/contents/makerdaos-game-changing-move",children:"here."})," The only newly introduced risk is smart contract risk in how the integration is made with the sDAI vault on Ethereum and the implementation of the sDAI vault on GC."]}),"\n",(0,n.jsx)(i.h4,{id:"architecture",children:"Architecture"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:s(47472).A+"",width:"876",height:"448"})}),"\n",(0,n.jsx)(i.h4,{id:"ethereum-1",children:"Ethereum"}),"\n",(0,n.jsxs)(i.p,{children:["A new implementation upgrade in xDAIForeignBridge contract: ",(0,n.jsx)(i.a,{href:"https://github.com/gnosischain/tokenbridge-contracts/blob/xdaibridge-upgrade-sdai/contracts/upgradeable_contracts/erc20_to_native/SavingsDaiConnector.sol",children:"SavingsDAI Connector"})," is added as a dependency in the contract. Compare to the old implementation of the ",(0,n.jsx)(i.a,{href:"https://github.com/gnosischain/tokenbridge-contracts/blob/master/contracts/upgradeable_contracts/erc20_to_native/CompoundConnector.sol",children:"Compound Connector"}),", the ",(0,n.jsx)(i.a,{href:"https://github.com/gnosischain/tokenbridge-contracts/blob/xdaibridge-upgrade-sdai/contracts/upgradeable_contracts/erc20_to_native/InterestConnector.sol#L138-L148",children:"payInterest"})," function in SavingsDai Connector is used to transfer interest received from vault to receiver address on Gnosis Chain rather than to receiver address on Ethereum."]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.a,{href:"https://github.com/gnosischain/tokenbridge-contracts/blob/xdaibridge-upgrade-sdai/contracts/interfaces/ISavingsDai.sol",children:"sDAI"})," is deployed on Ethereum. Any future DAI deposited to the Bridge will be wrapped into sDAI, with caveat that it will always keep the buffer of the minimumCashThreshold when investing."]}),"\n",(0,n.jsxs)(i.p,{children:[(0,n.jsx)(i.strong,{children:"minimumCashThreshold:"})," This value determines what is the recommended amount of DAI that should be held in the bridge at all times, in order to create a buffer for withdrawals without added operations and thus lower gas costs."]}),"\n",(0,n.jsx)(i.h4,{id:"gnosis-chain",children:"Gnosis Chain"}),"\n",(0,n.jsx)(i.p,{children:"There are two contracts being deployed on Gnosis."}),"\n",(0,n.jsx)(i.p,{children:"The first one is the sDAI vault, also an ERC 4626 which is the most popular standard for vaults which makes it extremely useful for Defi integrations from Lending Protocols like Agave and Spark,\xa0 to DEXes like Curve and Balancer with their boosted pools. The only modification to the standard vault (OZ implementation) is that it will allow for direct deposits and withdrawals in xDAI, rather than exclusively the ERC20 WXDAI."}),"\n",(0,n.jsx)(i.p,{children:"The second contract is the Interest Receiver. This will be the address provided on Mainnet bridge as the interest receiver. What this contract does is quite simple, it distributes the balance it holds in xDAI and WXDAI into sDAI at a fixed block rate that gets updated every 1-2 days to adjust for interest rate changes coming from mainnet. The goal of this contract is to not make it possible to front run the bridging process of the interest, and to make sure there is a fairly frequent update of the sDAI shares value and exchange rate. This contract has the perk of being very easy to switch for a different one by simply setting a new receiver on the bridge, without impacting any of the operations. This means if we want to make modifications such as add a fee or normalize rates in the future, that will be very easy to plug-in."}),"\n",(0,n.jsx)(i.h4,{id:"role-and-responsibilities",children:"Role and responsibilities"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"xDAI/wxDAI holder"})}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["Deposit xDAI/wxDAI and get sDAI shares:","\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["xDAI/wxDAI holders can deposit xDAI/wxDAI in ",(0,n.jsx)(i.a,{href:"https://agave.finance/sdai/",children:"https://agave.finance/sdai/"}),", in return for sDAI, and their corresponding shares in the vault are recorded."]}),"\n",(0,n.jsx)(i.li,{children:"Bridge Interest Receiver receives interest from mainnet and distribute to sDAI vault."}),"\n",(0,n.jsx)(i.li,{children:"sDAI holders withdraw/redeem xDAI/wxDAI (interest+original amount) according to their shares, that has gone up because of the interest received in step 2"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.strong,{children:"Keeper"})}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["Call ",(0,n.jsx)(i.code,{children:"investDAI()"})," ",(0,n.jsx)(i.code,{children:"refillBridge()"})," ",(0,n.jsx)(i.code,{children:"payInterest()"}),". On Ethereum, anyone is allowed to ",(0,n.jsx)(i.code,{children:"investDAI()"})," into the sDAI vault, anyone is allowed to ",(0,n.jsx)(i.code,{children:"refillBridge()"})," right back up to the threshold, and also anyone is allowed to ",(0,n.jsx)(i.code,{children:"payInterest()"}),". These processes are permissionless, and it\u2019s also costly which is why we will have a bot to automate these 3 maintenance procedures in the most efficient way possible."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0xC5cD1e53839eeD4d0A38f80C610e77bD07120c90",children:"Keeper"})," is maintained by ",(0,n.jsx)(i.a,{href:"https://www.karpatkey.com/",children:"Karpatkey team"}),". ",(0,n.jsx)(i.a,{href:"https://github.com/Luigy-Lemon/XDaiBridge-Keeper/tree/main",children:"Source Code"})]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"contracts",children:"Contracts"}),"\n",(0,n.jsxs)(d,{children:[(0,n.jsx)(r,{value:"ethereum",label:"Ethereum",children:(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"sDAI"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://etherscan.io/token/0x83f20f44975d03b1b09e64809b757c47f942beea",children:"0x83F20F44975D03b1b09e64809B757c47f942BEeA"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"DAI"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://etherscan.io/token/0x6b175474e89094c44da98b954eedeac495271d0f",children:"0x6B175474E89094C44Da98b954EedeAC495271d0F"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Keeper"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0xC5cD1e53839eeD4d0A38f80C610e77bD07120c90",children:"0xC5cD1e53839eeD4d0A38f80C610e77bD07120c90"})})]})]})]})}),(0,n.jsx)(r,{value:"gnosis",label:"Gnosis",children:(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"sDAI"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosisscan.io/address/0xaf204776c7245bF4147c2612BF6e5972Ee483701",children:"0xaf204776c7245bF4147c2612BF6e5972Ee483701"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"wxDAI"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosisscan.io/address/0xe91d153e0b41518a2ce8dd3d7944fa863463a97d",children:"0xe91D153E0b41518A2Ce8Dd3D7944Fa863463a97d"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"SavingsXDAI Adapter"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosisscan.io/address/0xD499b51fcFc66bd31248ef4b28d656d67E591A94",children:"0xD499b51fcFc66bd31248ef4b28d656d67E591A94"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Bridge Interest Receiver"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosisscan.io/address/0x670daeaF0F1a5e336090504C68179670B5059088",children:"0x670daeaF0F1a5e336090504C68179670B5059088"})})]})]})]})}),(0,n.jsx)(r,{value:"goeirli",label:"Goerli",children:(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"sDAI"}),(0,n.jsx)(i.td,{children:"0xD8134205b0328F5676aaeFb3B2a0DC15f4029d8C"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"DAI"}),(0,n.jsx)(i.td,{children:"0x11fE4B6AE13d2a6055C8D9cF65c55bac32B5d844"})]})]})]})}),(0,n.jsx)(r,{value:"chiado",label:"Chiado",children:(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Contract"}),(0,n.jsx)(i.th,{children:"Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"sDAI"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis-chiado.blockscout.com/address/0x20e5eB701E8d711D419D444814308f8c2243461F",children:"0x20e5eB701E8d711D419D444814308f8c2243461F"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"wxDAI"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis-chiado.blockscout.com/address/0x18c8a7ec7897177E4529065a7E7B0878358B3BfF",children:"0x18c8a7ec7897177E4529065a7E7B0878358B3BfF"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"SavingsXDAI Adapter"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis-chiado.blockscout.com/address/0xc1529e13A5842D790da01F778Bf23a3677830986",children:"0xc1529e13A5842D790da01F778Bf23a3677830986"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Bridge Interest Receiver"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis-chiado.blockscout.com/address/0x65e75819E4e8250a03958Ba303E8f95F8f578168",children:"0x65e75819E4e8250a03958Ba303E8f95F8f578168"})})]})]})]})})]}),"\n",(0,n.jsx)(i.h3,{id:"fees--daily-limits",children:"Fees & Daily Limits"}),"\n",(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Type"}),(0,n.jsx)(i.th,{children:"Ethereum -> Gnosis"}),(0,n.jsx)(i.th,{children:"Gnosis -> Ethereum"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Approx. Gas Cost"}),(0,n.jsx)(i.td,{}),(0,n.jsx)(i.td,{})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Bridge Fees"}),(0,n.jsx)(i.td,{children:"0%"}),(0,n.jsx)(i.td,{children:"0%"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Min Transfer"}),(0,n.jsx)(i.td,{children:"0.005 Dai"}),(0,n.jsx)(i.td,{children:"10 xDai"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Daily Limit"}),(0,n.jsx)(i.td,{children:"10,000,000 Dai"}),(0,n.jsx)(i.td,{children:"10,000,000 xDai"})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Max Single Deposit"}),(0,n.jsx)(i.td,{children:"9,999,999 Dai"}),(0,n.jsx)(i.td,{children:"10,000,000 xDai"})]})]})]}),"\n",(0,n.jsx)(i.admonition,{type:"note",children:(0,n.jsxs)(i.p,{children:["Daily Limit is reset according to the following logic: the smart contract stores total amount of processed tokens per current day and reverts on a new transfer if it exceeds the daily limit. Id of the day is calculated using the formula ",(0,n.jsx)(i.code,{children:"timestamp / (number of seconds in 1 day)"}),", where ",(0,n.jsx)(i.code,{children:"timestamp"})," is the Unix timestamp."]})}),"\n",(0,n.jsx)(i.h3,{id:"bridge-validators",children:"Bridge Validators"}),"\n",(0,n.jsxs)(i.p,{children:["The xDai bridge relies on trusted xDai Bridge Validators as cross-chain bridge oracle. There is a roadmap to move towards ",(0,n.jsx)(i.a,{href:"/bridges/roadmap",children:"trustless bridges"}),"."]}),"\n",(0,n.jsxs)(d,{children:[(0,n.jsxs)(r,{value:"gnosis-eth",label:"Gnosis<->ETH",children:[(0,n.jsx)(i.p,{children:"Bridge transactions currently requires signatures from 4 of 7 validators."}),(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Organization"}),(0,n.jsx)(i.th,{children:"Gnosis Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"GnosisDao"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x97630e2ae609d4104abda91f3066c556403182dd",children:"gno:0x97630e2ae609d4104abda91f3066c556403182dd"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Protofire"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x4D1c96B9A49C4469A0b720a22b74b034EDdFe051",children:"gno:0x4d1c96b9a49c4469a0b720a22b74b034eddfe051"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"CowProtocol"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x587c0d02b40822f15f05301d87c16f6a08aaddde",children:"gno:0x587c0d02b40822f15f05301d87c16f6a08aaddde"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Giveth"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0xc073C8E5ED9Aa11CF6776C69b3e13b259Ba9F506",children:"gno:0xc073C8E5ED9Aa11CF6776C69b3e13b259Ba9F506"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"GnosisSafe"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x1312e98995bbcc30fc63db3cef807e20cdd33dca",children:"gno:0x1312e98995bbcc30fc63db3cef807e20cdd33dca"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Karpatkey"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0xfa98b60e02a61b6590f073cad56e68326652d094",children:"gno:0xfa98b60e02a61b6590f073cad56e68326652d094"})})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Gateway"}),(0,n.jsx)(i.td,{children:(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x3e0A20099626F3d4d4Ea7B0cE0330e88d1Fe65D6",children:"gno:0x3e0A20099626F3d4d4Ea7B0cE0330e88d1Fe65D6"})})]})]})]})]}),(0,n.jsx)(r,{value:"chiado-goerli",label:"Chiado<->Goerli",children:(0,n.jsxs)(i.table,{children:[(0,n.jsx)(i.thead,{children:(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.th,{children:"Network"}),(0,n.jsx)(i.th,{children:"Address"})]})}),(0,n.jsxs)(i.tbody,{children:[(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Goerli"}),(0,n.jsxs)(i.td,{children:["0xef35547c29a7547df67ff573c158bf1b74381add(Gateway) ",(0,n.jsx)("br",{})," 0xda286781cbbc9819c94852885a118c93ed25e064 ",(0,n.jsx)("br",{})," 0x758c277ca1b04da3ba3add5d61cd26337cfafd7e ",(0,n.jsx)("br",{})," 0xdc3a6044440b75c5cefb023ae2d0e5b9069230cf (Gnosis DAO)"]})]}),(0,n.jsxs)(i.tr,{children:[(0,n.jsx)(i.td,{children:"Chiado"}),(0,n.jsxs)(i.td,{children:["0xef35547c29a7547df67ff573c158bf1b74381add(Gateway)",(0,n.jsx)("br",{})," 0xda286781cbbc9819c94852885a118c93ed25e064 ",(0,n.jsx)("br",{}),"0x758c277ca1b04da3ba3add5d61cd26337cfafd7e ",(0,n.jsx)("br",{}),"0x9d84152df06880cdabeb30e10c2985f40d98b901",(0,n.jsx)("br",{})," 0xdc3a6044440b75c5cefb023ae2d0e5b9069230cf (Gnosis DAO)"]})]})]})]})})]}),"\n",(0,n.jsx)(i.h3,{id:"bridge-validator-flow",children:"Bridge Validator Flow"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:s(75266).A+"",width:"1023",height:"1128"})}),"\n",(0,n.jsx)(i.h3,{id:"bridge-governance",children:"Bridge Governance"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["See ",(0,n.jsx)(i.a,{href:"/bridges/governance",children:"Bridge Governance"})]}),"\n"]}),"\n",(0,n.jsx)(i.h3,{id:"bridge-revenue",children:"Bridge Revenue"}),"\n",(0,n.jsx)(i.p,{children:"The xDai bridge currently generates bridge revenue through earned yield on stablecoins deposited on the bridge, which is then used by the GnosisDAO treasury to fund Gnosis development."}),"\n",(0,n.jsx)(i.h3,{id:"analytics",children:"Analytics"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://dune.com/maxaleks/xDai-Bridge",children:"Dune Analytics on xDai Bridge Transfers & Amount"})}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"how-it-works",children:"How it Works"}),"\n",(0,n.jsx)(i.h3,{id:"ethereum---gnosis-chain",children:"Ethereum -> Gnosis Chain."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:s(17082).A+"",width:"1225",height:"611"})}),"\n",(0,n.jsxs)(i.p,{children:["The ",(0,n.jsx)(i.a,{href:"/concepts/tokens/xdai",children:"xDai token"})," is minted when Dai is transferred from Ethereum to Gnosis using the xDai Bridge. During the transfer process, a block reward contract is invoked to mint xDai to a user's account. Because contract calls are made from the consensus engine to create xDai tokens, balance updates are more difficult to trace than simple value transfers."]}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["Users lock an amount of DAI on the ",(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0x4aa42145Aa6Ebf72e164C9bBC74fbD3788045016#code",children:"bridge contract"})," on Ethereum"]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"UserRequestForAffirmation"})," event is triggered"]}),"\n",(0,n.jsxs)(i.li,{children:["Validators observe the deposit and invoke ",(0,n.jsx)(i.code,{children:"executeAffirmation"})," function on Gnosis bridge contract"]}),"\n",(0,n.jsx)(i.li,{children:"When enough confirmations are collected (4/7 majority), the bridge contract on Gnosis Chain calls the block reward contract to record the receiver(s) and amount(s) of xDAI to mint."}),"\n",(0,n.jsxs)(i.li,{children:["The ",(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x481c034c6d9441db23Ea48De68BCAe812C5d39bA",children:"block reward contract"})," is called by the consensus engine to update user's xDAI balance."]}),"\n"]}),"\n",(0,n.jsxs)(i.p,{children:["You can view a receiver's address and amount of xDai received in the ",(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x481c034c6d9441db23Ea48De68BCAe812C5d39bA",children:"block reward contract's"})," logs. Whenever the ",(0,n.jsx)(i.code,{children:"executeAffirmation"})," method is called, it registers the following:"]}),"\n",(0,n.jsx)(i.pre,{children:(0,n.jsx)(i.code,{children:"AddedReceiver(\n\tuint256 amount,\n\taddress indexed receiver,\n\taddress indexed bridge\n)\n"})}),"\n",(0,n.jsxs)(i.p,{children:["Example: ",(0,n.jsx)(i.a,{href:"https://blockscout.com/xdai/mainnet/tx/0x5892a695860f6087a2d93140f05e6365142ff77fd7128e39dbc03128d5797ac4/logs",children:"https://blockscout.com/xdai/mainnet/tx/0x5892a695860f6087a2d93140f05e6365142ff77fd7128e39dbc03128d5797ac4/logs"})]}),"\n",(0,n.jsx)(i.hr,{}),"\n",(0,n.jsx)(i.h3,{id:"gnosis-chain---ethereum",children:"Gnosis Chain -> Ethereum."}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:s(25393).A+"",width:"1225",height:"611"})}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"User -> Gnosis Chain bridge: initiate a withdrawal: xDAI is burned."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"UserRequestForSignature"})," event emitted (see ",(0,n.jsx)(i.a,{href:"https://blockscout.com/xdai/mainnet/tx/0x8e23cf0ab01476c2df5b71a72603f2c229d3d9a63ad6ca71ce164798f3733826/internal-transactions",children:"example transaction"}),")."]}),"\n",(0,n.jsxs)(i.li,{children:["Validators listen to the event: call ",(0,n.jsx)(i.code,{children:"submitSignature"})," on Gnosis chain."]}),"\n",(0,n.jsxs)(i.li,{children:["After consensus: ",(0,n.jsx)(i.code,{children:"CollectedSignatures"})," event is emitted"]}),"\n",(0,n.jsx)(i.li,{children:"Anyone can execute the withdrawal on Ethereum (user via UI or validator). DAI is unlocked."}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"RelayedMessage"})," emitted on mainnet"]}),"\n"]}),"\n",(0,n.jsx)(i.admonition,{type:"note",children:(0,n.jsx)(i.p,{children:"This final step may be delayed if Ethereum mainnet is congested."})}),"\n",(0,n.jsx)(i.p,{children:"References:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/using-the-xdai-bridge/withdrawal-authorization-flow",children:"TokenBridge Docs: Withdrawing xDai to Dai"})}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"managing-bridge-contracts",children:"Managing Bridge Contracts"}),"\n",(0,n.jsx)(i.h3,{id:"upgrading-a-contract",children:"Upgrading a Contract"}),"\n",(0,n.jsx)(i.p,{children:"There are two possible scenarios for how the bridge or validators contracts can be upgraded:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:"a security fix when only the contract implementation is changed"}),"\n",(0,n.jsx)(i.li,{children:"an improvement when the contract implementation upgrade requires initialization of storage values."}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"basic-process",children:"Basic Process"}),"\n",(0,n.jsx)(i.p,{children:(0,n.jsx)(i.img,{src:s(48673).A+""})}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["One of the multisig wallet owners ABI encodes a method call with parameters (if any). This can be done with the ",(0,n.jsx)(i.a,{href:"https://abi.hashex.org/",children:"ABI Encoding Service"}),". The encoded sequence of bytes is used to create a transaction for the multisig wallet contract. This is done with the ",(0,n.jsx)(i.code,{children:"submitTransaction"})," method of the multisig wallet contract."]}),"\n",(0,n.jsxs)(i.li,{children:["The method raises the event ",(0,n.jsx)(i.code,{children:"Submission"})," containing the index of the registered transaction. The index is shared with the other owners of the wallet."]}),"\n",(0,n.jsxs)(i.li,{children:["The rest of the owners confirm the transaction by invoking ",(0,n.jsx)(i.code,{children:"confirmTransaction"})," from the multisig wallet contract."]}),"\n",(0,n.jsxs)(i.li,{children:["As soon as enough confirmations are received, the method encoded in step 1 is invoked automatically. This is important because adequate gas limits must be set for that transaction and set of confirmations sent by the wallet owner finalizing the operation. If the method is not invoked because the gas limit is exceeded, the owners can execute the confirmed transaction manually by sending ",(0,n.jsx)(i.code,{children:"executeTransaction"}),"."]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"security-upgrade",children:"Security Upgrade"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsx)(i.li,{children:"Deploy a new implementation of the bridge or validators contract."}),"\n",(0,n.jsxs)(i.li,{children:["Depending on the contract and the chain use one of the links below to get the current version of the contract implementation:","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["The bridge contract on ",(0,n.jsx)(i.em,{children:"ETH Mainnet"}),": ",(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0x4aa42145aa6ebf72e164c9bbc74fbd3788045016#readContract",children:"Etherscan"}),","]}),"\n",(0,n.jsxs)(i.li,{children:["The validators contract on ",(0,n.jsx)(i.em,{children:"ETH Mainnet"}),": ",(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0xe1579dEbdD2DF16Ebdb9db8694391fa74EeA201E#readContract",children:"Etherscan"})]}),"\n",(0,n.jsxs)(i.li,{children:["The bridge contract on ",(0,n.jsx)(i.em,{children:"Gnosis"}),": ",(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x7301CFA0e1756B71869E93d4e4Dca5c7d0eb0AA6?tab=read_proxy",children:"Blockscout"})]}),"\n",(0,n.jsxs)(i.li,{children:["The validators contract on ",(0,n.jsx)(i.em,{children:"Gnosis"}),": ",(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0xB289f0e6fBDFf8EEE340498a56e1787B303F1B6D?tab=read_proxy",children:"Blockscout"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Use the ",(0,n.jsx)(i.code,{children:"upgradeTo"})," method from EternalStorageProxy ABI, the address of the new implementation, and the incremented version number to encode the data for the transaction. Example of the data: ",(0,n.jsx)(i.code,{children:"3ad06d160000000000000000000000000000000000000000000000000000000000000004000000000000000000000000f097137c7ec5e582b5704065f72ac5903d0b526d"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Invoke ",(0,n.jsx)(i.code,{children:"submitTransaction"})," of the multisig wallet contract (",(0,n.jsx)(i.code,{children:"0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd"})," on Mainnet ETH, ",(0,n.jsx)(i.code,{children:"0x0d3726e5a9f37234d6b55216fc971d30f150a60f"})," on Gnosis chain). The data field must be filled with the bytes received from the previous step. The destination depends on the contract:","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0x4aa42145Aa6Ebf72e164C9bBC74fbD3788045016"})," if the security upgrade is made for the bridge contract on ETH Mainnet."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0xe1579dEbdD2DF16Ebdb9db8694391fa74EeA201E"})," if the security upgrade is made for the validators contract on the ETH Mainnet."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0x7301cfa0e1756b71869e93d4e4dca5c7d0eb0aa6"})," if the security upgrade is made for the bridge contract on the xDai chain."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0xb289f0e6fbdff8eee340498a56e1787b303f1b6d"})," if the security upgrade is made for the validators contract on the xDai chain."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Identify the index of the transaction returned in the ",(0,n.jsx)(i.code,{children:"Submission"})," event as soon as the transaction from the previous step is included into a block and share it with the other multisig wallet owners."]}),"\n",(0,n.jsxs)(i.li,{children:["(for the rest of owners) Invoke ",(0,n.jsx)(i.code,{children:"confirmTransaction"})," on the multisig wallet contract (",(0,n.jsx)(i.code,{children:"0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd"})," on the Mainnet ETH, ",(0,n.jsx)(i.code,{children:"0x0d3726e5a9f37234d6b55216fc971d30f150a60f"})," on Gnosis chain). Set the gas limit to ",(0,n.jsx)(i.em,{children:"three times bigger"})," than the gas estimator function suggests."]}),"\n"]}),"\n",(0,n.jsx)(i.h4,{id:"bridge-improvement",children:"Bridge Improvement"}),"\n",(0,n.jsxs)(i.ol,{children:["\n",(0,n.jsxs)(i.li,{children:["Identify the method to call as part of the new implementation initialization. In the following steps we assume that the method's name is ",(0,n.jsx)(i.code,{children:"upgradeFrom3to4()"})," which takes no arguments."]}),"\n",(0,n.jsxs)(i.li,{children:["Use the method mentioned above from the new contract implementation code or ABI to encode the data to be passed to ",(0,n.jsx)(i.code,{children:"upgradeToAndCall()"})," method. Example of the data: ",(0,n.jsx)(i.code,{children:"50d28adb"}),"."]}),"\n",(0,n.jsx)(i.li,{children:"Deploy a new implementation of the bridge or validators contract."}),"\n",(0,n.jsxs)(i.li,{children:["Depending on the contract and the chain, use one of the links below to get the current ",(0,n.jsx)(i.code,{children:"version"})," of the contract implementation:","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:["The bridge contract on ",(0,n.jsx)(i.em,{children:"the ETH Mainnet"}),": ",(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0x4aa42145aa6ebf72e164c9bbc74fbd3788045016#readContract",children:"Etherscan"}),","]}),"\n",(0,n.jsxs)(i.li,{children:["The validators contract on ",(0,n.jsx)(i.em,{children:"the ETH Mainnet"}),": ",(0,n.jsx)(i.a,{href:"https://etherscan.io/address/0xe1579dEbdD2DF16Ebdb9db8694391fa74EeA201E#readContract",children:"Etherscan"})]}),"\n",(0,n.jsxs)(i.li,{children:["The bridge contract on ",(0,n.jsx)(i.em,{children:"Gnosis Chain"}),": ",(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0x7301CFA0e1756B71869E93d4e4Dca5c7d0eb0AA6?tab=read_proxy",children:"Blockscout"})]}),"\n",(0,n.jsxs)(i.li,{children:["The validators contract on ",(0,n.jsx)(i.em,{children:"Gnosis chain"}),": ",(0,n.jsx)(i.a,{href:"https://gnosis.blockscout.com/address/0xB289f0e6fBDFf8EEE340498a56e1787B303F1B6D?tab=read_proxy",children:"Blockscout"})]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Use the ",(0,n.jsx)(i.code,{children:"upgradeToAndCall"})," method from the EternalStorageProxy ABI, the address of the new implementation, and the incremented version number to encode the data for the transaction. Example of the data: ",(0,n.jsx)(i.code,{children:"0xa9c45fcb0000000000000000000000000000000000000000000000000000000000000004000000000000000000000000692a70d2e424a56d2c6c27aa97d1a86395877b3a0000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000450d28adb00000000000000000000000000000000000000000000000000000000"}),"."]}),"\n",(0,n.jsxs)(i.li,{children:["Invoke ",(0,n.jsx)(i.code,{children:"submitTransaction"})," on the multisig wallet contract (",(0,n.jsx)(i.code,{children:"0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd"})," on Mainnet ETH, ",(0,n.jsx)(i.code,{children:"0x0d3726e5a9f37234d6b55216fc971d30f150a60f"})," on Gnosis chain). The data field must be filled with the bytes received on the previous step. The destination depends on the contract:","\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0x4aa42145Aa6Ebf72e164C9bBC74fbD3788045016"})," if the security upgrade is made for the bridge contract on ETH Mainnet."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0xe1579dEbdD2DF16Ebdb9db8694391fa74EeA201E"})," if the security upgrade is made for the validators contract on ETH Mainnet."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0x7301cfa0e1756b71869e93d4e4dca5c7d0eb0aa6"})," if the security upgrade is made for the bridge contract on Gnosis chain."]}),"\n",(0,n.jsxs)(i.li,{children:[(0,n.jsx)(i.code,{children:"0xb289f0e6fbdff8eee340498a56e1787b303f1b6d"})," if the security upgrade is made for the validators contract on Gnosis chain."]}),"\n"]}),"\n"]}),"\n",(0,n.jsxs)(i.li,{children:["Identify the index of the transaction returned in the ",(0,n.jsx)(i.code,{children:"Submission"})," event as soon as the transaction from the previous step is included into a block and share it with other multisig wallet owners."]}),"\n",(0,n.jsxs)(i.li,{children:["(for the rest of owners) Invoke ",(0,n.jsx)(i.code,{children:"confirmTransaction()"})," of the multisig wallet contract (",(0,n.jsx)(i.code,{children:"0xff1a8EDA5eAcdB6aAf729905492bdc6376DBe2dd"})," on Mainnet ETH, ",(0,n.jsx)(i.code,{children:"0x0d3726e5a9f37234d6b55216fc971d30f150a60f"})," on Gnosis chain). Set the gas limit to ",(0,n.jsx)(i.em,{children:"four times bigger"})," than the gas estimator suggests."]}),"\n"]}),"\n",(0,n.jsx)(i.p,{children:"References:"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-contracts-management",children:"TokenBridge Docs: xDai Contracts Management"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-contracts-management/upgrade-contracts",children:"TokenBridge Docs: Upgrading xDai Bridge Contracts"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-contracts-management/configuration",children:"TokenBridge Docs: Configuring Contracts"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-contracts-management/admin-privileges-management",children:"TokenBridge Docs: Admin Privilege Management"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-contracts-management/erc20-tokens-release",children:"TokenBridge Docs: ERC20 Token Release"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-contracts-management/xdai-bridge-management-api",children:"TokenBridge Docs: xDai Bridge Management API"})}),"\n"]}),"\n",(0,n.jsx)(i.h2,{id:"resources",children:"Resources"}),"\n",(0,n.jsxs)(i.ul,{children:["\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/about",children:"Tokenbridge Docs on xDai Bridge"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"/bridges/tutorials/using-xdai-bridge/",children:"xDai Bridge docs"})}),"\n",(0,n.jsx)(i.li,{children:(0,n.jsx)(i.a,{href:"https://docs.tokenbridge.net/xdai-bridge/xdai-bridge-oracle-maintenance/oracle-migration-to-a-new-server",children:"TokenBridge Docs: Migrating Oracle to new Server"})}),"\n"]})]})}function l(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,n.jsx)(i,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}function x(e,i){throw new Error("Expected "+(i?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},17082:(e,i,s)=>{s.d(i,{A:()=>n});const n=s.p+"assets/images/dai-bridge-01-baab0e1bbdf6d63e6df46cf473a96e51.png"},25393:(e,i,s)=>{s.d(i,{A:()=>n});const n=s.p+"assets/images/dai-bridge-02-5a5a52acd013c8583cc2a8b0449b662b.png"},75266:(e,i,s)=>{s.d(i,{A:()=>n});const n=s.p+"assets/images/xdai-bridge-validator-flow-d5ce9bd8571499100c0aa16fe5236049.png"},48673:(e,i,s)=>{s.d(i,{A:()=>n});const n=s.p+"assets/images/xdaibridge-contract-mgmt-caaeb7e5b56c2c2b5a23479d1e51b47e.svg"},47472:(e,i,s)=>{s.d(i,{A:()=>n});const n=s.p+"assets/images/DSRonGnosis-f2256817671e92248fa713eb4488a7ea.png"},28453:(e,i,s)=>{s.d(i,{R:()=>d,x:()=>a});var n=s(96540);const t={},r=n.createContext(t);function d(e){const i=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function a(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),n.createElement(r.Provider,{value:i},e.children)}}}]);