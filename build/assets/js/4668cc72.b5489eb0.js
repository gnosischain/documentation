"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[8914],{11105:(t,e,s)=>{s.r(e),s.d(e,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var n=s(74848),a=s(28453);const o={description:"Gnosis Chain deposit contracts",keywords:["gnosis","gnosis contracts","deposi contracts"]},i="Deposit Contracts",r={id:"about/specs/deposit-contracts",title:"Deposit Contracts",description:"Gnosis Chain deposit contracts",source:"@site/docs/about/specs/deposit-contracts.md",sourceDirName:"about/specs",slug:"/about/specs/deposit-contracts",permalink:"/about/specs/deposit-contracts",draft:!1,unlisted:!1,editUrl:"https://github.com/gnosischain/documentation/tree/main/docs/about/specs/deposit-contracts.md",tags:[],version:"current",lastUpdatedBy:"Vanshika",lastUpdatedAt:1708167281,formattedLastUpdatedAt:"Feb 17, 2024",frontMatter:{description:"Gnosis Chain deposit contracts",keywords:["gnosis","gnosis contracts","deposi contracts"]},sidebar:"about",previous:{title:"Security Audits",permalink:"/about/specs/security-audit"}},c={},d=[];function l(t){const e={a:"a",code:"code",h1:"h1",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...t.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(e.h1,{id:"deposit-contracts",children:"Deposit Contracts"}),"\n",(0,n.jsx)(e.p,{children:"The Deposit contracts allow to deposit ERC20 tokens to Gnosis Chain and withdraw them back to Ethereum mainnet."}),"\n",(0,n.jsxs)(e.p,{children:["The Deposit contracts on mainnet and Gnosis Chain are almost identical. However, Gnosis Chain users need to manually call the ",(0,n.jsx)(e.code,{children:"claimWithdrawal(address)"})," or ",(0,n.jsx)(e.code,{children:"claimWithdrawals(addresses)"})," method to withdraw the tokens/rewards back, whereas on Ethereum mainnet that's done automatically."]}),"\n",(0,n.jsxs)(e.p,{children:["The main issue is that GNO is an ERC20 token and it must emit ",(0,n.jsx)(e.code,{children:"Transfer"})," events as per ",(0,n.jsx)(e.a,{href:"https://eips.ethereum.org/EIPS/eip-20#transfer",children:"EIP-20"}),", which Gnosis Chain cannot do with system transactions at the moment. That's why it's required to call a normal trasaction to claim GNO tokens. The alternative would be very complex and diverge from Ethereum on the EL side."]}),"\n",(0,n.jsx)(e.p,{children:"The main withdrawal methods look as follows:"}),"\n",(0,n.jsx)(e.pre,{children:(0,n.jsx)(e.code,{className:"language-solidity",children:"/**\n  * @dev Claim withdrawal amount for an address\n  * @param _address Address to transfer withdrawable tokens\n  */\nfunction claimWithdrawal(address _address) public {\n    uint256 amount = withdrawableAmount[_address];\n    if (amount > 0) {\n        withdrawableAmount[_address] = 0;\n        stake_token.safeTransfer(_address, amount);\n    }\n}\n/**\n  * @dev Claim withdrawal amounts for an array of addresses\n  * @param _addresses Addresses to transfer withdrawable tokens\n  */\nfunction claimWithdrawals(address[] calldata _addresses) external {\n    for (uint256 i = 0; i < _addresses.length; ++i) {\n        claimWithdrawal(_addresses[i]);\n    }\n}\n"})}),"\n",(0,n.jsx)(e.p,{children:"You can find a full list of contract differences on Github:"}),"\n",(0,n.jsxs)(e.ul,{children:["\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://github.com/gnosischain/deposit-contract/blob/master/contracts/SBCDepositContract.sol#L237-L257",children:"Gnosis Chain"})}),"\n",(0,n.jsx)(e.li,{children:(0,n.jsx)(e.a,{href:"https://github.com/gnosischain/deposit-contract/compare/c7217fccac3049901f78547f4024127fa1dcdcd4..master",children:"Shapella"})}),"\n"]})]})}function h(t={}){const{wrapper:e}={...(0,a.R)(),...t.components};return e?(0,n.jsx)(e,{...t,children:(0,n.jsx)(l,{...t})}):l(t)}},28453:(t,e,s)=>{s.d(e,{R:()=>i,x:()=>r});var n=s(96540);const a={},o=n.createContext(a);function i(t){const e=n.useContext(o);return n.useMemo((function(){return"function"==typeof t?t(e):{...e,...t}}),[e,t])}function r(t){let e;return e=t.disableParentContext?"function"==typeof t.components?t.components(a):t.components||a:i(t.components),n.createElement(o.Provider,{value:e},t.children)}}}]);