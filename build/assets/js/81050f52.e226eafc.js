"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[29284],{92153:(e,n,t)=>{t.d(n,{Ay:()=>a});var s=t(74848),r=t(28453);function o(e){const n={code:"code",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"Create new folders:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"mkdir -p /home/$USER/gnosis/consensus/data\n"})}),"\n",(0,s.jsx)(n.p,{children:"Including the folders from your Execution client, your folder structure should now look like:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"/home/$USER/gnosis/\n\u251c\u2500\u2500 jwtsecret/\n\u251c\u2500\u2500 execution/\n\u2514\u2500\u2500 consensus/\n    \u2514\u2500\u2500 data/\n"})})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(o,{...e})}):o(e)}},99791:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>u,contentTitle:()=>l,default:()=>m,frontMatter:()=>i,metadata:()=>c,toc:()=>d});var s=t(74848),r=t(28453),o=(t(92153),t(49489)),a=t(7227);const i={title:"Nimbus"},l="Run Beacon Node + Validator: Nimbus",c={id:"node/manual/beacon/nimbus",title:"Nimbus",description:"Nimbus is a client implementation that strives to be as lightweight as possible in terms of resources used. Nimbus has consensus layer clients for Ethereum and Gnosis Chain.",source:"@site/docs/node/manual/beacon/nimbus.md",sourceDirName:"node/manual/beacon",slug:"/node/manual/beacon/nimbus",permalink:"/node/manual/beacon/nimbus",draft:!1,unlisted:!1,editUrl:"https://github.com/gnosischain/documentation/tree/main/docs/node/manual/beacon/nimbus.md",tags:[],version:"current",lastUpdatedBy:"zengzengzenghuy",lastUpdatedAt:1701957578,formattedLastUpdatedAt:"Dec 7, 2023",frontMatter:{title:"Nimbus"},sidebar:"node",previous:{title:"Lighthouse",permalink:"/node/manual/beacon/lighthouse"},next:{title:"Prysm",permalink:"/node/manual/beacon/prysm"}},u={},d=[{value:"Option 1: Run as System Process",id:"option-1-run-as-system-process",level:2},{value:"Option 2: Run using Docker",id:"option-2-run-using-docker",level:2},{value:"1. Folder Structure",id:"1-folder-structure",level:3},{value:"2. Docker Compose",id:"2-docker-compose",level:3},{value:"3. Start Containers",id:"3-start-containers",level:3},{value:"4. Monitor Logs",id:"4-monitor-logs",level:3},{value:"5. Updating your Node",id:"5-updating-your-node",level:3}];function h(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"run-beacon-node--validator-nimbus",children:"Run Beacon Node + Validator: Nimbus"}),"\n",(0,s.jsx)(n.p,{children:"Nimbus is a client implementation that strives to be as lightweight as possible in terms of resources used. Nimbus has consensus layer clients for Ethereum and Gnosis Chain."}),"\n",(0,s.jsx)(n.admonition,{title:"Learn More about Nimbus",type:"tip",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Nimbus Repo: ",(0,s.jsx)(n.a,{href:"https://github.com/status-im/nimbus-eth2",children:"https://github.com/status-im/nimbus-eth2"})]}),"\n",(0,s.jsxs)(n.li,{children:["Nimbus Docs: ",(0,s.jsx)(n.a,{href:"https://nimbus.team/docs/",children:"https://nimbus.team/docs/"})]}),"\n"]})}),"\n",(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Gnosis' Nimbus repo has sample Dockerfiles and configs"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://github.com/gnosischain/gnosis-nimbus-eth2",children:"https://github.com/gnosischain/gnosis-nimbus-eth2"})}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"option-1-run-as-system-process",children:"Option 1: Run as System Process"}),"\n",(0,s.jsx)(n.p,{children:"We currently do not release Gnosis compatible binaries for Nimbus, nor do we intend to for the time being."}),"\n",(0,s.jsx)(n.h2,{id:"option-2-run-using-docker",children:"Option 2: Run using Docker"}),"\n",(0,s.jsxs)(n.p,{children:["This tutorial runs Nimbus beacon node and validator on the same container, please make sure you have your ",(0,s.jsx)(n.a,{href:"/node/manual/#step-4a-generate-validator-keys",children:"generated validator key"})," and ",(0,s.jsx)(n.a,{href:"/node/manual/#step-1-configure-server",children:"jwtsecret"})," before moving to the next step."]}),"\n",(0,s.jsx)(n.h3,{id:"1-folder-structure",children:"1. Folder Structure"}),"\n",(0,s.jsx)(n.p,{children:"Folder structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"/home/$USER/gnosis/\n\u251c\u2500\u2500 jwtsecret/\n\u251c\u2500\u2500 execution/\n\u2514\u2500\u2500 consensus/\n    \u2514\u2500\u2500 data/\n    \u2514\u2500\u2500 validator_key/\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-docker-compose",children:"2. Docker Compose"}),"\n",(0,s.jsxs)(n.p,{children:["Modify your docker-compose file with your favorite text editor and add the ",(0,s.jsx)(n.code,{children:"consensus"})," container. The file should now look like:"]}),"\n",(0,s.jsxs)(n.p,{children:["Create ",(0,s.jsx)(n.code,{children:"docker-compose.yml"})," and insert the configuration below."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-yaml",metastring:'title="/home/$USER/gnosis/docker-compose.yml" showLineNumbers',children:'version: "3"\nservices:\n    execution:\n        # From Step 2\n        # ...\n    consensus:\n        container_name: consensus\n        image: ghcr.io/gnosischain/gnosis-nimbus-eth2:latest\n        restart: unless-stopped\n        networks:\n          - gnosis_net\n        volumes:\n        - ./consensus/data:/data\n// highlight-start\n        - ${Path_to_jwtsecret}:/jwt:ro\n        - ${Path_to_keystore}:/validators\n// highlight-end\n        ports:\n        - 9100:9100\n        - 9100:9100/udp\n        command: |\n        --data-dir=/data\n        --web3-url=http://localhost:8551\n        --jwt-secret=/jwt\n        --light-client-data-serve=true\n        --light-client-data-import-mode=full\n        --tcp-port:9100\n        --udp-port:9100\n        --validators-dir=/validators\n// highlight-start\n        --suggested-fee-recipient=${Fee address}\n        --graffiti=${Graffiti}\n// highlight-end\n        --rest\n        --rest-address=0.0.0.0\n        --network=gnosis\n        --history=prune\n    logging:\n      driver: "local"\n\nnetworks:\n  gnosis_net:\n    name: gnosis_net\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Replace ",(0,s.jsx)(n.code,{children:"suggested-fee-recipient"})," with your Gnosis address. This fee recipient address will receive tips from user transactions from the block the validator proposed. If not set, the tips will be sent to zero address, that is burnt competely. It is strongly recommended that you configure this value in your setup. Learn more about ",(0,s.jsx)(n.a,{href:"https://nimbus.guide/suggested-fee-recipient.html",children:"suggested fee recipient"})," flag in Nimbus docs."]}),"\n",(0,s.jsxs)(n.p,{children:["Replace ",(0,s.jsx)(n.code,{children:"graffiti"})," with your own ",(0,s.jsx)(n.a,{href:"https://nimbus.guide/graffiti.html",children:"graffiti"}),". It is an optional field that can be used to add a message to the ",(0,s.jsx)(n.a,{href:"https://ethereum.org/en/developers/docs/blocks/",children:"block"})," by the proposer."]}),"\n",(0,s.jsx)(n.h3,{id:"3-start-containers",children:"3. Start Containers"}),"\n",(0,s.jsx)(n.p,{children:"Start the consensus layer client listed in the compose file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"cd /home/$USER/gnosis\ndocker-compose up -d\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-monitor-logs",children:"4. Monitor Logs"}),"\n",(0,s.jsxs)(n.p,{children:["Check your logs for each service (",(0,s.jsx)(n.code,{children:"execution"})," and ",(0,s.jsx)(n.code,{children:"consensus"}),") with:"]}),"\n","\n","\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(a.A,{value:"execution",label:"execution",default:!0,children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"docker logs -f --tail 500 execution\n"})})}),(0,s.jsx)(a.A,{value:"consensus",label:"consensus",children:(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"docker logs -f --tail 500 consensus\n"})})})]}),"\n",(0,s.jsx)(n.h3,{id:"5-updating-your-node",children:"5. Updating your Node"}),"\n",(0,s.jsx)(n.p,{children:"To update, just pull the new images, then stop and restart your docker-compose file:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"cd /home/$USER/gnosis\ndocker-compose pull\ndocker-compose stop\ndocker-compose up -d\n"})})]})}function m(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},7227:(e,n,t)=>{t.d(n,{A:()=>a});t(96540);var s=t(18215);const r={tabItem:"tabItem_Ymn6"};var o=t(74848);function a(e){let{children:n,hidden:t,className:a}=e;return(0,o.jsx)("div",{role:"tabpanel",className:(0,s.A)(r.tabItem,a),hidden:t,children:n})}},49489:(e,n,t)=>{t.d(n,{A:()=>k});var s=t(96540),r=t(18215),o=t(24245),a=t(56347),i=t(36494),l=t(62814),c=t(45167),u=t(81269);function d(e){return s.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,s.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,s.useMemo)((()=>{const e=n??function(e){return d(e).map((e=>{let{props:{value:n,label:t,attributes:s,default:r}}=e;return{value:n,label:t,attributes:s,default:r}}))}(t);return function(e){const n=(0,c.X)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function m(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function p(e){let{queryString:n=!1,groupId:t}=e;const r=(0,a.W6)(),o=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,l.aZ)(o),(0,s.useCallback)((e=>{if(!o)return;const n=new URLSearchParams(r.location.search);n.set(o,e),r.replace({...r.location,search:n.toString()})}),[o,r])]}function g(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,o=h(e),[a,l]=(0,s.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!m({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const s=t.find((e=>e.default))??t[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:o}))),[c,d]=p({queryString:t,groupId:r}),[g,f]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,o]=(0,u.Dv)(t);return[r,(0,s.useCallback)((e=>{t&&o.set(e)}),[t,o])]}({groupId:r}),b=(()=>{const e=c??g;return m({value:e,tabValues:o})?e:null})();(0,i.A)((()=>{b&&l(b)}),[b]);return{selectedValue:a,selectValue:(0,s.useCallback)((e=>{if(!m({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),d(e),f(e)}),[d,f,o]),tabValues:o}}var f=t(11062);const b={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var x=t(74848);function v(e){let{className:n,block:t,selectedValue:s,selectValue:a,tabValues:i}=e;const l=[],{blockElementScrollPositionUntilNextRender:c}=(0,o.a_)(),u=e=>{const n=e.currentTarget,t=l.indexOf(n),r=i[t].value;r!==s&&(c(n),a(r))},d=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=l.indexOf(e.currentTarget)+1;n=l[t]??l[0];break}case"ArrowLeft":{const t=l.indexOf(e.currentTarget)-1;n=l[t]??l[l.length-1];break}}n?.focus()};return(0,x.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,r.A)("tabs",{"tabs--block":t},n),children:i.map((e=>{let{value:n,label:t,attributes:o}=e;return(0,x.jsx)("li",{role:"tab",tabIndex:s===n?0:-1,"aria-selected":s===n,ref:e=>l.push(e),onKeyDown:d,onClick:u,...o,className:(0,r.A)("tabs__item",b.tabItem,o?.className,{"tabs__item--active":s===n}),children:t??n},n)}))})}function j(e){let{lazy:n,children:t,selectedValue:r}=e;const o=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=o.find((e=>e.props.value===r));return e?(0,s.cloneElement)(e,{className:"margin-top--md"}):null}return(0,x.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,s.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function y(e){const n=g(e);return(0,x.jsxs)("div",{className:(0,r.A)("tabs-container",b.tabList),children:[(0,x.jsx)(v,{...e,...n}),(0,x.jsx)(j,{...e,...n})]})}function k(e){const n=(0,f.A)();return(0,x.jsx)(y,{...e,children:d(e.children)},String(n))}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>i});var s=t(96540);const r={},o=s.createContext(r);function a(e){const n=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),s.createElement(o.Provider,{value:n},e.children)}}}]);